# æ—…æ™ºåˆ†é”€å¼€æ”¾å¹³å° API æ¥å£å¼€å‘è¯´æ˜æ–‡æ¡£

**ç‰ˆæœ¬ï¼šV1.0.6**

## ğŸ“‹ ä¿®è®¢è®°å½•

| ç‰ˆæœ¬         | æ—¶é—´         | ä¿®è®¢å†…å®¹                                                                               | è¯´æ˜                                                     |
|------------|------------|------------------------------------------------------------------------------------|--------------------------------------------------------|
| åˆç‰ˆV0.1     | 2021-07-23 | åˆ†é”€æ¥å£                                                                               | æ­£å¼æ–‡æ¡£                                                   |
| ä¿®è®¢è®°å½•V0.1   | 2021-12-15 | 2.3.5 é…’åº—äº§å“æ•°æ®åˆ—è¡¨å¢åŠ : ratePlanId :ä»·æ ¼æ–¹æ¡ˆ idã€cancelRuleId :å–æ¶ˆè§„åˆ™ idã€bookingRuleId :é¢„è®¢è§„åˆ™ id | é€šè¿‡é…’åº—äº§å“æ•°æ®åˆ—è¡¨å¯ä»¥ç›´æ¥è·å–åˆ°äº§å“ç›¸å…³ä¿¡æ¯çš„å…³è”å…³ç³»                           |
| ä¿®è®¢è®°å½•V0.1   | 2021-12-16 | é…’åº—åŸºç¡€ä¿¡æ¯å¢åŠ ç»åº¦çº¬åº¦                                                                       |                                                        |
| ä¿®è®¢è®°å½•V0.2   | 2022-01-13 | å»é™¤äº§å“åº“å­˜                                                                             | äº§å“åº“å­˜æš‚ä¸æ”¯æŒ                                               |
| ä¿®è®¢è®°å½•V0.3   | 2022-01-13 | æ–°å¢é…’åº—ä¿¡æ¯å˜æ›´é€šçŸ¥                                                                         |                                                        |
| ä¿®è®¢è®°å½•V0.4   | 2022-05-25 | æˆ¿å‹æ–°å¢çª—æˆ·ç±»å‹                                                                           |                                                        |
| ä¿®è®¢è®°å½•V0.5   | 2024-07-24 | é…’åº—åŸºç¡€æ•°æ®æ¥å£æ–°å¢æ¯é…’åº—ID                                                                    |                                                        |
| ä¿®è®¢è®°å½•V0.6   | 2024-11-20 | å¢åŠ ä¸Šçº¿ä¿¡æ¯é€šçŸ¥ã€ä¸‹å•å¢åŠ ä¼ä¸šä¿¡æ¯                                                                  |                                                        |
| ä¿®è®¢è®°å½•V1.0.6 | 2025-09-10 | 2.5.1 ä¸‹å•æ¥å£æ”¯æŒä¼ å…¥å–æ¶ˆè§„åˆ™                                                                 | ä¸‹å•æ¥å£æ”¯æŒä¼ å…¥å–æ¶ˆè§„åˆ™ï¼Œå–æ¶ˆæ—¶æŒ‰ç…§å–æ¶ˆè§„åˆ™åˆ¤æ–­ï¼Œéœ€è¦ç™½åå•é…ç½®ï¼Œæœªé…ç½®ä¼ å…¥å–æ¶ˆè§„åˆ™åˆ™ä¸‹å•ç›´æ¥æŠ¥é”™      |
| ä¿®è®¢è®°å½•V1.0.7 | 2025-11-06 | 1. å®Œå–„é…’åº—é™æ€ä¿¡æ¯è¯¦æƒ… 2. å¢åŠ é…’åº—é™æ€ä¿¡æ¯å˜æ›´é€šçŸ¥                                                      | 2.3.2 é…’åº—è¯¦æƒ…å¢åŠ å¼€ç¥¨ç±»å‹ã€å‘ç¥¨æ¨¡å¼ç­‰ï¼›2.3.4 é…’åº—æˆ¿å‹è¯¦æƒ…å¢åŠ æ¥¼å±‚ã€é¢ç§¯ã€å®½å¸¦ã€wifi ç±»å‹ç­‰ |
| ä¿®è®¢è®°å½•V1.0.8 | 2025-12-05 | å®Œå–„é…’åº—å›¾ç‰‡å’Œæˆ¿å‹å›¾ç‰‡ä¿¡æ¯                                                                      | 2.3.2 é…’åº—è¯¦æƒ…å¢åŠ é…’åº—å›¾ç‰‡ 2.3.4 é…’åº—æˆ¿å‹è¯¦æƒ…å¢åŠ æˆ¿å‹å›¾ç‰‡                    |

## ğŸ“š ç›®å½•

1. [æ•°æ®æ¨¡å‹è§£é‡Š](#ä¸€æ•°æ®æ¨¡å‹è§£é‡Š)
2. [è¯·æ±‚è¯´æ˜](#äºŒè¯·æ±‚è¯´æ˜)
3. [åˆ†é”€å•†è°ƒç”¨æ—…æ™ºåˆ†é”€å¹³å° API è°ƒç”¨ç¤ºä¾‹è¯´æ˜](#ä¸‰åˆ†é”€å•†è°ƒç”¨æ—…æ™ºåˆ†é”€å¹³å°apiè°ƒç”¨ç¤ºä¾‹è¯´æ˜)
4. [æ—…æ™ºåˆ†é”€å¹³å°è°ƒç”¨åˆ†é”€å•†æ¥å£è¯´æ˜](#å››æ—…æ™ºåˆ†é”€å¹³å°è°ƒç”¨åˆ†é”€å•†æ¥å£è¯´æ˜)
5. [æšä¸¾è¯´æ˜](#äº”æšä¸¾è¯´æ˜)

## ğŸ“Š ä¸€ã€æ•°æ®æ¨¡å‹è§£é‡Š

### ğŸ”§ é€šç”¨è¿”å›ç 

| CODE | è¿”å›ä¿¡æ¯ | å¤‡æ³¨     |
|------|------|--------|
| 200  | æˆåŠŸ   |        |
| 400  | éæ³•å‚æ•° | è¯·æ±‚å‚æ•°ä¸å¯¹ |
| 401  | æœªæˆæƒ  |        |
| 500  | ç³»ç»Ÿå¼‚å¸¸ |        |

## ğŸ“¡ äºŒã€è¯·æ±‚è¯´æ˜

### ğŸ“‹ åŸºæœ¬è¦æ±‚

1. **å…¨é‡æ•°æ®**ï¼šé…’åº—é™æ€æ•°æ®å’ŒåŠ¨æ€æ•°æ®è¿”å›çš„éƒ½æ˜¯å…¨é‡æ•°æ®ï¼Œå¦‚æœå†æ¬¡æ‹‰å–æ²¡æœ‰è·å–åˆ°è¯´æ˜å·²ä¸‹çº¿
2. **HTTPSè¯·æ±‚**ï¼šå®¢æˆ·é€šè¿‡ HTTPS è¯·æ±‚å‚æ•°ï¼ŒMethod: POST
3. **å®æ—¶å“åº”**ï¼šç”±æ—…æ™ºæ¥å£ç³»ç»Ÿå®æ—¶å“åº”è¯·æ±‚å‚æ•°

### ğŸ”‘ é€šç”¨è¯·æ±‚å‚æ•°

| å‚æ•°åç§°       | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°                   |
|------------|------|--------|----------------------|
| trackingId | æ˜¯    | String | æ¯æ¬¡è¯·æ±‚çš„å”¯ä¸€ IDï¼Œå»ºè®®é‡‡ç”¨ UUID |
| version    | æ˜¯    | String | ç‰ˆæœ¬ï¼›é»˜è®¤ V1.0.0         |
| timestamp  | æ˜¯    | long   | è¯·æ±‚æ—¶é—´æˆ³                |
| signature  | æ˜¯    | string | ç­¾å                   |

## ğŸ” 2.1 æˆæƒæ¥å£

### ğŸ”‘ 2.1.1 è·å– token

**è°ƒç”¨é™åˆ¶**ï¼šé¢‘æ¬¡æ¯æ—¥ 100 æ¬¡ï¼Œæœ‰æ•ˆæœŸ 2 å°æ—¶

#### ğŸ“ è¯·æ±‚åœ°å€

```
{url}/authorize/getToken
```

#### ğŸ“‹ è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°

| å‚æ•°åç§°         | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°           |
|--------------|------|--------|--------------|
| clientId     | æ˜¯    | String | åº”ç”¨ ID/å®¢æˆ·ç«¯ç”¨æˆ·å |
| clientSecret | æ˜¯    | String | åº”ç”¨ç§˜é’¥/å®¢æˆ·ç«¯å¯†ç    |

#### ğŸ“¤ è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°          | æ•°æ®ç±»å‹   | æè¿°                   |
|---------------|--------|----------------------|
| code          | String | è¿”å›ç                   |
| message       | String | è¿”å›æ¶ˆæ¯                 |
| data          | Object | è¿”å›æ•°æ®                 |
| - accessToken | String | accessToken          |
| - expiresIn   | long   | accessToken è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |

#### ğŸ’¡ JSON æ•°æ®ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "accessToken": "1dfc0af55d2b4b10a4f56534655cbf61",
    "expiresIn": 1628481614844
  }
}
```

#### ğŸ§ª æ¥å£æµ‹è¯•åœ°å€ä¸è´¦å·

- **æµ‹è¯•ç¯å¢ƒåœ°å€**ï¼šhttps://open-qa.zktapi.com/drp
- **æµ‹è¯•ç¯å¢ƒè´¦å¯†**ï¼š
    - clientId: --------
    - clientSecret: --------
    - secretKey: --------ï¼ˆç”¨äºç”Ÿæˆç­¾åï¼‰
- **æµ‹è¯•é…’åº—**ï¼š--------

### 2.2 é™æ€ä¿¡æ¯æ¥å£

#### 2.2.1 æŸ¥è¯¢ä¸‰çº§åŸå¸‚ä¿¡æ¯ï¼ˆæ ‘ï¼‰

- è¯·æ±‚åœ°å€ï¼š{url}/region/listRegionTrees
- Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
|-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

| å‚æ•°åç§°       | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹    | æè¿°    |
|------------|------|---------|-------|
| provinceId | å¦    | Integer | çœä»½ ID |

- è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°         | æ•°æ®ç±»å‹    | æè¿°                                                                                     |
|--------------|---------|----------------------------------------------------------------------------------------|
| code         | String  | è¿”å›ç                                                                                     |
| message      | String  | è¿”å›æ¶ˆæ¯                                                                                   |
| data         | List    | è¿”å›æ•°æ®                                                                                   |
| - pid        | Integer | å›½å®¶ id                                                                                  |
| - id         | Integer | çœ id                                                                                   |
| - level      | Integer | çº§åˆ«ï¼›0 æ´² 1 å›½ 2 çœ 3 å¸‚ 4 åŒº 5 ä¹¡ 6 æ‘                                                         |
| - type       | Integer | ç±»å‹ï¼›0:æ­£å¸¸çº§åˆ«ï¼ˆå›½ï¼Œçœï¼Œå¸‚ï¼Œå¿ï¼Œä¹¡é•‡ï¼‰1:ç›´è¾–å¸‚ 2:è‡ªæ²»åŒº 3:ç‰¹åˆ«è¡Œæ”¿åŒº 4:è‡ªæ²»å· 5:åœ°åŒº 6:å¿çº§å¸‚ 7:è¡Œæ”¿åŒº 8:è‡ªæ²»å¿ 9:çœç›´è¾–è¡Œæ”¿å•ä½ 10:å¸‚ç›´è¾– |
| - name       | String  | çœåç§°                                                                                    |
| - children   | List    | åŸå¸‚ä¿¡æ¯                                                                                   |
| - - pid      | Integer | çœ id                                                                                   |
| - - id       | Integer | å¸‚ id                                                                                   |
| - - level    | Integer | çº§åˆ«ï¼›0 æ´² 1 å›½ 2 çœ 3 å¸‚ 4 åŒº 5 ä¹¡ 6 æ‘                                                         |
| - - type     | Integer | ç±»å‹ï¼›0:æ­£å¸¸çº§åˆ«ï¼ˆå›½ï¼Œçœï¼Œå¸‚ï¼Œå¿ï¼Œä¹¡é•‡ï¼‰1:ç›´è¾–å¸‚ 2:è‡ªæ²»åŒº 3:ç‰¹åˆ«è¡Œæ”¿åŒº 4:è‡ªæ²»å· 5:åœ°åŒº 6:å¿çº§å¸‚ 7:è¡Œæ”¿åŒº 8:è‡ªæ²»å¿ 9:çœç›´è¾–è¡Œæ”¿å•ä½ 10:å¸‚ç›´è¾– |
| - - name     | String  | å¸‚åç§°                                                                                    |
| - - children | List    | åŒºä¿¡æ¯                                                                                    |
| - - - pid    | Integer | å¸‚ id                                                                                   |
| - - - id     | Integer | åŒº id                                                                                   |
| - - - level  | Integer | çº§åˆ«ï¼›0 æ´² 1 å›½ 2 çœ 3 å¸‚ 4 åŒº 5 ä¹¡ 6 æ‘                                                         |
| - - - type   | Integer | ç±»å‹ï¼›0:æ­£å¸¸çº§åˆ«ï¼ˆå›½ï¼Œçœï¼Œå¸‚ï¼Œå¿ï¼Œä¹¡é•‡ï¼‰1:ç›´è¾–å¸‚ 2:è‡ªæ²»åŒº 3:ç‰¹åˆ«è¡Œæ”¿åŒº 4:è‡ªæ²»å· 5:åœ°åŒº 6:å¿çº§å¸‚ 7:è¡Œæ”¿åŒº 8:è‡ªæ²»å¿ 9:çœç›´è¾–è¡Œæ”¿å•ä½ 10:å¸‚ç›´è¾– |
| - - - name   | String  | åŒºåç§°                                                                                    |

- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": [
    {
      "pid": 1,
      "id": 16,
      "level": 2,
      "type": 0,
      "name": "æ±Ÿè‹çœ",
      "children": [
        {
          "id": 226,
          "pid": 16,
          "level": 3,
          "type": 0,
          "name": "è‹å·å¸‚",
          "children": [
            {
              "pid": 226,
              "id": 6324,
              "level": 4,
              "type": 7,
              "name": "å§‘è‹åŒº"
            }
          ]
        }
      ]
    }
  ]
}
```

## ğŸ¨ 2.3 é…’åº—åŸºç¡€æ•°æ®æ¥å£

### ğŸ“‹ 2.3.1 é…’åº—åŸºç¡€æ•°æ®åˆ—è¡¨

#### ğŸ“ è¯·æ±‚åœ°å€

```
{url}/hotel/list
```

#### ğŸ”‘ Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
|-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

#### ğŸ“¥ è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°

| å‚æ•°åç§°       | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹    | æè¿°                |
|------------|------|---------|-------------------|
| provinceId | å¦    | Integer | çœä»½ ID             |
| cityId     | å¦    | String  | åŸå¸‚ ID             |
| pageIndex  | æ˜¯    | Integer | é¡µæ•°ï¼›é»˜è®¤ï¼š1           |
| pageSize   | æ˜¯    | Integer | æ¯é¡µæ¡æ•°ï¼›é»˜è®¤ 20ï¼Œæœ€å¤§ 500 |

#### ğŸ“¤ è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°            | æ•°æ®ç±»å‹    | æè¿°       |
|-----------------|---------|----------|
| code            | String  | è¿”å›ç       |
| message         | String  | è¿”å›æ¶ˆæ¯     |
| data            | Object  | è¿”å›æ•°æ®     |
| - total         | Integer | åˆ†é¡µæŸ¥è¯¢æ€»æ¡æ•°  |
| - totalPage     | Integer | åˆ†é¡µæŸ¥è¯¢æ€»é¡µæ•°  |
| - currPage      | Integer | åˆ†é¡µæŸ¥è¯¢å½“å‰é¡µæ•° |
| - datas         | List    | æ•°æ®é›†åˆ     |
| - - hotelVid    | Long    | é…’åº— ID    |
| - - hotelid     | Long    | æ¯é…’åº— ID   |
| - - hotelName   | String  | é…’åº—åç§°     |
| - - countryId   | Integer | å›½å®¶ ID    |
| - - provinceId  | Integer | çœä»½ ID    |
| - - cityId      | Integer | åŸå¸‚ ID    |
| - - districtId  | Integer | åŒº ID     |
| - - country     | String  | å›½å®¶       |
| - - province    | String  | çœä»½       |
| - - city        | String  | åŸå¸‚       |
| - - district    | String  | åŒº        |
| - - nativeCode  | String  | å›½å®¶ç       |
| - - areaCode    | String  | åŒºåŸŸç       |
| - - telMainCode | String  | æ‰‹æœºå·å’Œåº§æœº   |
| - - telExtCode  | String  | åˆ†æœºå·      |
| - - address     | String  | è¯¦ç»†åœ°å€     |
| - - longitude   | String  | ç»åº¦       |
| - - latitude    | String  | çº¬åº¦       |

#### ğŸ’¡ JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "total": 100,
    "totalPage": 5,
    "currPage": 1,
    "datas": [
      {
        "hotelVid": 1000001,
        "hotelName": "æµ‹è¯•",
        "countryId": 1,
        "provinceId": 16,
        "cityId": 226,
        "districtId": 3945,
        "province": "æ±Ÿè‹çœ",
        "city": "è‹å·å¸‚",
        "district": "å´ä¸­åŒº",
        "nativeCode": "",
        "areaCode": "",
        "telMainCode": "",
        "telExtCode": "",
        "address": "é…æ…§è·¯",
        "longitude": "",
        "latitude": ""
      }
    ]
  }
}
```

### ğŸ” 2.3.2 é…’åº—è¯¦æƒ…

#### ğŸ“ è¯·æ±‚åœ°å€

```
{url}/hotel/getByVid
```

#### ğŸ”‘ Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
|-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

#### ğŸ“¥ è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°

| å‚æ•°åç§°     | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿°    |
|----------|------|------|-------|
| hotelVid | æ˜¯    | Long | é…’åº— ID |

#### ğŸ“¤ è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°                | æ•°æ®ç±»å‹    | æè¿°                                        |
|---------------------|---------|-------------------------------------------|
| code                | String  | è¿”å›ç                                        |
| message             | String  | è¿”å›æ¶ˆæ¯                                      |
| data                | Object  | è¿”å›æ•°æ®                                      |
| - hotelVid          | Long    | é…’åº— ID                                     |
| - hotelid           | Long    | æ¯é…’åº— ID                                    |
| - hotelName         | String  | é…’åº—åç§°                                      |
| - countryId         | Integer | å›½å®¶ ID                                     |
| - provinceId        | Integer | çœä»½ ID                                     |
| - cityId            | Integer | åŸå¸‚ ID                                     |
| - districtId        | Integer | åŒº ID                                      |
| - country           | String  | å›½å®¶                                        |
| - province          | String  | çœä»½                                        |
| - city              | String  | åŸå¸‚                                        |
| - district          | String  | åŒº                                         |
| - nativeCode        | String  | å›½å®¶ç                                        |
| - areaCode          | String  | åŒºåŸŸç                                        |
| - telMainCode       | String  | æ‰‹æœºå·å’Œåº§æœº                                    |
| - telExtCode        | String  | åˆ†æœºå·                                       |
| - address           | String  | è¯¦ç»†åœ°å€                                      |
| - longitude         | String  | ç»åº¦                                        |
| - latitude          | String  | çº¬åº¦                                        |
| - invoiceType       | Integer | å¼€ç¥¨ç±»å‹ï¼š1-é”€å”®ç«¯æä¾›å‘ç¥¨ï¼Œ2-é…’åº—å¼€å…·                     |
| - customerType      | Integer | å®¢æˆ·ç±»å‹ï¼š0-ä¸åŒºåˆ†ï¼Œéƒ½èƒ½æ¥å¾…ï¼Œ1-ä»…å†…å®¾ï¼Œ2-ä»…å¤–å®¾ï¼Œ3-ä»…æ—¥å®¾ï¼Œ4-ä»…å¤§é™†å®¢äºº |
| - supportPreference | Integer | æ”¯æŒåå¥½ï¼š0-ä¸æ”¯æŒï¼Œ1-æ”¯æŒ                           |
| - hotelImages       | List    | é…’åº—å›¾ç‰‡é›†åˆ                                    |
| - - albumCode       | String  | å›¾ç‰‡ç±»å‹                                      |
| - - albumName       | String  | ç±»å‹åç§°                                      |
| - - images          | List    | å›¾ç‰‡ URL é›†åˆ                                 |

#### ğŸ“· å›¾ç‰‡ç±»å‹è¯´æ˜

- **HEAD_IMG_ALBUM**ï¼šå¤´å›¾
- **OUTWARD_ALBUM**ï¼šå¤–è§‚
- **PUBLIC_AREA_ALBUM**ï¼šå…¬å…±åŒºåŸŸ
- **FOOD_ALBUM**ï¼šé¤é¥®
- **MEETING_ALBUM**ï¼šä¼šè®®
- **ENTERTAINMENT_ALBUM**ï¼šä¼‘é—²å¨±ä¹
- **OTHER_ALBUM**ï¼šå…¶ä»–

#### ğŸ’¡ JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "hotelVid": 1000001,
    "hotelName": "æµ‹è¯•",
    "countryId": 1,
    "provinceId": 16,
    "cityId": 226,
    "districtId": 3945,
    "country": "ä¸­å›½",
    "province": "æ±Ÿè‹çœ",
    "city": "è‹å·å¸‚",
    "district": "å´ä¸­åŒº",
    "nativeCode": "",
    "areaCode": "",
    "telMainCode": "",
    "telExtCode": "",
    "address": "é…æ…§è·¯",
    "longitude": "",
    "latitude": "",
    "invoiceType": 1,
    "customerType": 0,
    "supportPreference": 1,
    "hotelImages": [
      {
        "albumCode": "HEAD_IMG_ALBUM",
        "albumName": "å¤´å›¾",
        "images": [
          "https://example.com/img1.jpg",
          "https://example.com/img2.jpg"
        ]
      }
    ]
  }
}
```

### ğŸ  2.3.3 é…’åº—æˆ¿å‹åˆ—è¡¨

#### ğŸ“ è¯·æ±‚åœ°å€

```
{url}/roomType/listByHotelVid
```

#### ğŸ”‘ Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
|-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

#### ğŸ“¥ è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°

| å‚æ•°åç§°     | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿°    |
|----------|------|------|-------|
| hotelVid | æ˜¯    | Long | é…’åº— ID |

#### ğŸ“¤ è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°            | æ•°æ®ç±»å‹    | æè¿°     |
|-----------------|---------|--------|
| code            | String  | è¿”å›ç     |
| message         | String  | è¿”å›æ¶ˆæ¯   |
| data            | List    | è¿”å›æ•°æ®   |
| - hotelVid      | Long    | é…’åº— ID  |
| - hotelid       | Long    | æ¯é…’åº— ID |
| - roomTypeId    | Long    | æˆ¿å‹ ID  |
| - roomTypeName  | String  | æˆ¿å‹åç§°   |
| - windowType    | String  | çª—æˆ·ç±»å‹   |
| - bedTypes      | List    | åºŠå‹é›†åˆ   |
| - - bedType     | String  | åºŠå‹     |
| - - bedTypeDesc | String  | åºŠå‹æè¿°   |
| - - bedSpecCode | String  | åºŠå‹è§„æ ¼ç¼–ç  |
| - - bedSpecDesc | String  | åºŠå‹è§„æ ¼æè¿° |
| - - bedNum      | Integer | åºŠå‹æ•°é‡   |

#### ğŸªŸ çª—æˆ·ç±»å‹æšä¸¾å€¼

- **WIN**ï¼šæœ‰çª—
- **SWIN**ï¼šéƒ¨åˆ†æœ‰çª—
- **WINL**ï¼šæ— çª—
- **AWIN**ï¼šæœ‰è¿‡é“çª—æˆ·

#### ğŸ’¡ JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": [
    {
      "hotelVid": 1000001,
      "roomTypeId": 100,
      "roomTypeName": "æµ‹è¯•",
      "windowType": "WIN",
      "bedTypes": [
        {
          "bedType": "DOUBLE",
          "bedTypeDesc": "åŒåºŠ",
          "bedSpecCode": "1.8*1.5",
          "bedSpecDesc": "é•¿1.8 å®½1.5",
          "bedNum": 2
        },
        {
          "bedType": "DOUBLE",
          "bedTypeDesc": "åŒåºŠ",
          "bedSpecCode": "1.8*1.5",
          "bedSpecDesc": "é•¿1.8 å®½1.5",
          "bedNum": 2
        }
      ]
    }
  ]
}
```

#### 2.3.4 é…’åº—æˆ¿å‹è¯¦æƒ…

- è¯·æ±‚åœ°å€ï¼š{url}/roomType/getById
- Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
  |-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

| å‚æ•°åç§°       | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿°    |
  |------------|------|------|-------|
| hotelVid   | æ˜¯    | Long | é…’åº— id |
| roomTypeId | æ˜¯    | Long | æˆ¿å‹ id |

- è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°            | æ•°æ®ç±»å‹    | æè¿°                                                                                          |
  |-----------------|---------|---------------------------------------------------------------------------------------------|
| code            | String  | è¿”å›ç                                                                                          |
| message         | String  | è¿”å›æ¶ˆæ¯                                                                                        |
| data            | Object  | è¿”å›æ•°æ®                                                                                        |
| - hotelVid      | Long    | é…’åº— ID                                                                                       |
| - hotelid       | Long    | æ¯é…’åº— ID                                                                                      |
| - roomTypeId    | Long    | æˆ¿å‹ ID                                                                                       |
| - roomTypeName  | String  | æˆ¿å‹åç§°                                                                                        |
| - windowType    | String  | çª—æˆ·ç±»å‹ï¼Œæšä¸¾å€¼ï¼šWIN: æœ‰çª—ï¼ŒSWIN: éƒ¨åˆ†æœ‰çª—ï¼ŒWINL:æ— çª—ï¼ŒAWIN: æœ‰è¿‡é“çª—æˆ·ï¼ŒSKYLIGHT: å¤©çª—ï¼ŒCWIN: å°é—­çª—ï¼ŒFWIN: é£˜çª—ï¼ŒUNKNOWN: æœªçŸ¥ |
| - floor         | String  | æ¥¼å±‚                                                                                          |
| - area          | String  | é¢ç§¯                                                                                          |
| - broadband     | Integer | å®½å¸¦ç±»å‹ 1- å…è´¹æä¾›ï¼Œ2- ä¸æä¾›æ­¤æœåŠ¡ï¼Œ3- éƒ¨åˆ†æ”¶è´¹ï¼Œ4-éƒ¨åˆ†æä¾›å¹¶æ”¶è´¹ï¼Œ5- æ”¶è´¹æä¾›ï¼Œ6- ä¸ç¡®å®šï¼Œ7- éƒ¨åˆ†æä¾›å¹¶å…è´¹ï¼Œ8-éƒ¨åˆ†æä¾›å¹¶åªæœ‰éƒ¨åˆ†æ”¶è´¹            |
| - wifi          | Integer | wifi ç±»å‹ 1- å…è´¹æä¾›ï¼Œ2- ä¸æä¾›æ­¤æœåŠ¡ï¼Œ3- éƒ¨åˆ†æ”¶è´¹ï¼Œ4-éƒ¨åˆ†æä¾›å¹¶æ”¶è´¹ï¼Œ5- æ”¶è´¹æä¾›ï¼Œ6- ä¸ç¡®å®šï¼Œ7- éƒ¨åˆ†æä¾›å¹¶å…è´¹ï¼Œ8-éƒ¨åˆ†æä¾›å¹¶åªæœ‰éƒ¨åˆ†æ”¶è´¹         |
| - maxOccupancy  | Integer | æœ€å¤§å¯å…¥ä½äººæ•°                                                                                     |
| - bedsRelation  | String  | åºŠå‹å…³ç³» AND :ä¸å…³ç³» ; OR :æˆ–å…³ç³»ï¼ˆéå¿…ä¼ ï¼ŒåºŠå‹æ•°é‡å¤§äº1 æ—¶éç©ºï¼‰                                                    |
| - bedTypes      | List    | åºŠå‹é›†åˆ                                                                                        |
| - - bedType     | String  | åºŠå‹                                                                                          |
| - - bedTypeDesc | String  | åºŠå‹æè¿°                                                                                        |
| - - bedSpecCode | String  | åºŠå‹è§„æ ¼ç¼–ç                                                                                       |
| - - bedSpecDesc | String  | åºŠå‹è§„æ ¼æè¿°                                                                                      |
| - - bedNum      | Integer | åºŠå‹æ•°é‡                                                                                        |
| - imageUrls     | List    | å›¾ç‰‡ url é›†åˆ                                                                                   |

- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "hotelVid": 1000001,
    "roomTypeId": 100,
    "roomTypeName": "æµ‹è¯•",
    "windowType": "WIN",
    "floor": "3",
    "area": "25",
    "broadband": 1,
    "wifi": 1,
    "maxOccupancy": 2,
    "bedsRelation": "AND",
    "bedTypes": [
      {
        "bedType": "DOUBLE",
        "bedTypeDesc": "åŒåºŠ",
        "bedSpecCode": "1.8*1.5",
        "bedSpecDesc": "é•¿1.8 å®½1.5",
        "bedNum": 2
      }
    ],
    "imageUrls": [
      "https://example.com/room1.jpg",
      "https://example.com/room2.jpg"
    ]
  }
}
```

### ğŸ“¦ 2.3.5 é…’åº—äº§å“æ•°æ®åˆ—è¡¨

#### ğŸ“ è¯·æ±‚åœ°å€

```
{url}/product/list
```

#### ğŸ”‘ Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
|-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

#### ğŸ“¥ è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°

| å‚æ•°åç§°     | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿°    |
|----------|------|------|-------|
| hotelVid | æ˜¯    | Long | é…’åº— ID |

#### ğŸ“¤ è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°                        | æ•°æ®ç±»å‹       | æè¿°                                                            |
|-----------------------------|------------|---------------------------------------------------------------|
| code                        | String     | è¿”å›ç                                                            |
| message                     | String     | è¿”å›æ¶ˆæ¯                                                          |
| data                        | Object     | è¿”å›æ•°æ®                                                          |
| - hotelVid                  | Long       | é…’åº— ID                                                         |
| - hotelid                   | Long       | æ¯é…’åº— ID                                                        |
| - ratePlans                 | List       | ä»·æ ¼æ–¹æ¡ˆé›†åˆ                                                        |
| - - ratePlanId              | Long       | ä»·æ ¼æ–¹æ¡ˆ ID                                                       |
| - - ratePlanName            | String     | ä»·æ ¼æ–¹æ¡ˆåç§°                                                        |
| - - ratePlanType            | Integer    | ä»·æ ¼æ–¹æ¡ˆç±»å‹ (0:æ™®é€šæˆ¿ä»·æ ¼ï¼Œ1:é’Ÿç‚¹æˆ¿ä»·æ ¼) [æš‚ä¸æ”¯æŒé’Ÿç‚¹æˆ¿]                            |
| - - startDate               | String     | å¼€å§‹æ—¥æœŸ yyyymmdd                                                 |
| - - endDate                 | String     | ç»“æŸæ—¥æœŸ yyyymmdd                                                 |
| - - ratePlanTimeBuckets     | List       | ä»·æ ¼æ–¹æ¡ˆæ¯æ—¥æ—¶é—´æ®µï¼›ä¸ºç©ºè¡¨ç¤ºå…¨å¤©æœ‰æ•ˆï¼Œä»·æ ¼æ–¹æ¡ˆç±»å‹ä¸ºé’Ÿç‚¹æˆ¿ä»·æ ¼åˆ™éç©ºï¼›[æš‚ä¸æ”¯æŒé’Ÿç‚¹æˆ¿]                  |
| - - - startTime             | String     | å¼€å§‹æ—¶é—´ï¼›hh:mm:ss é’Ÿç‚¹æˆ¿ä½¿ç”¨å­—æ®µ                                         |
| - - - endTime               | String     | ç»“æŸæ—¶é—´ï¼›hh:mm:ss é’Ÿç‚¹æˆ¿ä½¿ç”¨å­—æ®µ                                         |
| - cancelRules               | List       | å–æ¶ˆè§„åˆ™é›†åˆ                                                        |
| - - cancelRuleId            | Long       | å–æ¶ˆè§„åˆ™ ID                                                       |
| - - cancelType              | Integer    | å–æ¶ˆç±»å‹ï¼›0:å…è´¹å–æ¶ˆï¼›1:é™æ—¶å–æ¶ˆï¼›2:ä¸å¯å–æ¶ˆ                                     |
| - - cancelTimeType          | Integer    | å–æ¶ˆæ—¶é—´ç±»å‹ï¼›0:æ—¶é—´(cancelDaysAgo+cancelTimeAgo)ï¼›1:å°æ—¶(cancelHoursAgo) |
| - - cancelDaysAgo           | Integer    | N å¤©å‰ å–æ¶ˆæ—¶é—´ç±»å‹ä¸º 0 æ—¶è¿”å›                                            |
| - - cancelTimeAgo           | String     | N ç‚¹å‰ eg:18:30 å–æ¶ˆæ—¶é—´ç±»å‹ä¸º 0 æ—¶è¿”å›                                   |
| - - cancelHoursAgo          | Integer    | å…¥ä½å‰ n å°æ—¶ (å…¥ä½å½“å¤© 24:00 å¾€å‰æ¨ N å°æ—¶) å–æ¶ˆæ—¶é—´ç±»å‹ä¸º 1 æ—¶è¿”å›                  |
| - - deductionType           | Integer    | æ‰£è´¹çš„ç±»å‹ï¼›0:é»˜è®¤(ä¸æ‰£è´¹)ï¼›1:é¦–æ™šï¼›2:å…¨é¢                                     |
| - bookingRules              | List       | é¢„å®šè§„åˆ™é›†åˆ                                                        |
| - - bookingRuleId           | Long       | é¢„å®šè§„åˆ™ ID                                                       |
| - - bookingConfirmType      | Integer    | é¢„å®šç¡®è®¤ç±»å‹ (æ¯æ—¥çš„æœ‰é…ç½®ä¼˜å…ˆä½¿ç”¨)ï¼›0:é»˜è®¤(æ— é…ç½®)ã€1:å³æ—¶ç¡®è®¤(ä¿ç•™æˆ¿)ã€2:å¾…æŸ¥ã€3:é™æ—¶ç¡®è®¤         |
| - - minAmount               | Integer    | æœ€å°‘é¢„å®šæˆ¿é—´æ•°é‡ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                             |
| - - maxAmount               | Integer    | æœ€å¤§é¢„å®šæˆ¿é—´æ•°é‡ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                             |
| - - minDays                 | Integer    | æœ€å°‘å…¥ä½å¤©æ•°ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                               |
| - - maxDays                 | Integer    | æœ€å¤§å…¥ä½å¤©æ•°ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                               |
| - - minAdvHours             | Integer    | æœ€å°‘æå‰é¢„è®¢æ—¶é—´(ä»¥ç”¨æˆ·é€‰æ‹©çš„å…¥ä½æ—¥æœŸçš„ 23:59:59 è®¡ç®—)ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                    |
| - - maxAdvHours             | Integer    | æœ€å¤§æå‰é¢„å®šæ—¶é—´(ä»¥ç”¨æˆ·é€‰æ‹©çš„å…¥ä½æ—¥æœŸçš„ 23:59:59 è®¡ç®—)ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                    |
| - products                  | List       | äº§å“é›†åˆ                                                          |
| - - hotelVid                | Long       | é…’åº— ID                                                         |
| - - roomTypeId              | Long       | æˆ¿å‹ ID                                                         |
| - - productId               | Long       | äº§å“ ID                                                         |
| - - ratePlanId              | Long       | ä»·æ ¼æ–¹æ¡ˆ ID                                                       |
| - - cancelRuleId            | Long       | å–æ¶ˆè§„åˆ™ ID                                                       |
| - - bookingRuleId           | Long       | é¢„è®¢è§„åˆ™ ID                                                       |
| - - productName             | String     | äº§å“åç§°                                                          |
| - - productType             | Integer    | äº§å“ç±»å‹ï¼š0:æ™®é€šäº§å“ï¼Œ1:ä¼šå‘˜ç‹¬äº«äº§å“ï¼Œ2:åè®®äº§å“                                   |
| - - mealType                | Integer    | é¤é£Ÿç±»å‹ï¼›0:æœªçŸ¥ï¼›1:æ—©é¤ï¼›2:åˆé¤ï¼›3:æ™šé¤                                      |
| - - mealCount               | Integer    | é¤é£Ÿä»½æ•°                                                          |
| - - paymentType             | Integer    | æ”¯ä»˜ç±»å‹ï¼›0:æœªçŸ¥ï¼›1:ç°ä»˜ï¼›2:é¢„ä»˜ï¼›3:ä¿¡ç”¨ä½                                     |
| - - cancelType              | Integer    | å–æ¶ˆç±»å‹ï¼›0:å…è´¹å–æ¶ˆï¼›1:é™æ—¶å–æ¶ˆï¼›2:ä¸å¯å–æ¶ˆ                                     |
| - - stockType               | Integer    | åº“å­˜ç±»å‹ï¼›0:æˆ¿å‹åº“å­˜(é»˜è®¤)ï¼›1:äº§å“åº“å­˜(å…¨æ¸ é“å…±äº«)ï¼›2:äº§å“æ¸ é“ç‹¬äº«åº“å­˜                      |
| - - maxOccupancy            | Integer    | æœ€å¤§å…¥ä½äººæ•°ï¼›0 è¡¨ç¤ºä¸é™åˆ¶                                                |
| - - productPromotions       | Object     | ä¿ƒé”€ä¿¡æ¯ [æš‚ä¸æ”¯æŒ]                                                   |
| - - - promotionType         | Integer    | ä¿ƒé”€ç±»å‹ ç¤ºä¾‹ï¼š"TTTJ"å¤©å¤©ç‰¹ä»·ï¼›"TQYD"æå‰é¢„å®šï¼›"LZYH"è¿ä½ä¼˜æƒ ï¼›                     |
| - - - promotionRule         | String     | ä¿ƒé”€è§„åˆ™                                                          |
| - - - promotionDesc         | String     | ä¿ƒé”€æè¿°                                                          |
| - - - startDate             | String     | ä¿ƒé”€å¼€å§‹æ—¶é—´ yyyy-mm-dd ä¸ºç©ºä¸é™åˆ¶                                       |
| - - - endDate               | String     | ä¿ƒé”€ç»“æŸæ—¶é—´ yyyy-mm-dd ä¸ºç©ºä¸é™åˆ¶                                       |
| - - productGuarantee        | Object     | æ‹…ä¿é‡‘ä¿¡æ¯                                                         |
| - - - guaranteeType         | Integer    | æ‹…ä¿é‡‘ç±»å‹ï¼›0:é»˜è®¤(æ— )ï¼›1:é¦–æ™šæ‹…ä¿ï¼›2:å…¨é¢æ‹…ä¿                                   |
| - - - guaranteeAmount       | BigDecimal | æ‹…ä¿é‡‘é¢                                                          |
| - - - latestReservationTime | String     | æœ€æ™šä¿ç•™æ—¶é—´ï¼›eg:18:00                                               |

#### ğŸ’¡ JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "ratePlans": [
      {
        "ratePlanId": 44,
        "ratePlanName": "æ‹‰å–ä»£é”€ä»·æ ¼æµ‹è¯•",
        "ratePlanType": 0,
        "startDate": "20210705",
        "endDate": "20220705",
        "ratePlanTimeBuckets": [
          {
            "startTime": "8:00",
            "endTime": "20:00"
          }
        ]
      }
    ],
    "cancelRules": [
      {
        "cancelRuleId": 37,
        "cancelType": 0,
        "cancelTimeType": 1,
        "cancelDaysAgo": 0,
        "cancelTimeAgo": "",
        "cancelHoursAgo": 0,
        "deductionType": 0
      }
    ],
    "bookingRules": [
      {
        "bookingRuleId": 1,
        "bookingConfirmType": 3,
        "minAmount": 2,
        "maxAmount": 10,
        "minDays": 2,
        "maxDays": 2,
        "minAdvHours": 12,
        "maxAdvHours": 48
      }
    ],
    "products": [
      {
        "hotelVid": 10012300,
        "roomTypeId": 114,
        "productId": 1099,
        "ratePlanId": "171-1489",
        "cancelRuleId": "17",
        "bookingRuleId": "171",
        "productName": "æ ‡å‡†å¤§åºŠ-ä¸å«æ—©(é¢„ä»˜)",
        "productType": 0,
        "mealType": 1,
        "mealCount": 0,
        "paymentType": 2,
        "cancelType": 0,
        "stockType": 0,
        "maxOccupancy": 0,
        "productPromotions": null,
        "productGuarantee": {
          "guaranteeType": 1,
          "guaranteeAmount": 100,
          "latestReservationTime": "20:00"
        }
      }
    ]
  }
}
```

### ğŸ” 2.3.6 é…’åº—äº§å“è¯¦æƒ…

#### ğŸ“ è¯·æ±‚åœ°å€

```
{url}/product/getById
```

#### ğŸ”‘ Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
|-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

#### ğŸ“¥ è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°

| å‚æ•°åç§°      | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿°    |
|-----------|------|------|-------|
| hotelVid  | æ˜¯    | Long | é…’åº— ID |
| productId | æ˜¯    | Long | äº§å“ ID |

#### ğŸ“¤ è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°                    | æ•°æ®ç±»å‹       | æè¿°                                                            |
|-------------------------|------------|---------------------------------------------------------------|
| code                    | String     | è¿”å›ç                                                            |
| message                 | String     | è¿”å›æ¶ˆæ¯                                                          |
| data                    | Object     | è¿”å›æ•°æ®                                                          |
| - hotelVid              | Long       | é…’åº— ID                                                         |
| - hotelid               | Long       | æ¯é…’åº— ID                                                        |
| - roomTypeId            | Long       | æˆ¿å‹ ID                                                         |
| - productId             | Long       | äº§å“ ID                                                         |
| - productName           | String     | äº§å“åç§°                                                          |
| - productType           | Integer    | äº§å“ç±»å‹ï¼š0:æ™®é€šäº§å“ï¼Œ1:ä¼šå‘˜ç‹¬äº«äº§å“ï¼Œ2:åè®®äº§å“                                   |
| - mealType              | Integer    | é¤é£Ÿç±»å‹ï¼›0:æœªçŸ¥ï¼›1:æ—©é¤ï¼›2:åˆé¤ï¼›3:æ™šé¤                                      |
| - mealCount             | Integer    | é¤é£Ÿä»½æ•°                                                          |
| - paymentType           | Integer    | æ”¯ä»˜ç±»å‹ï¼›0:æœªçŸ¥ï¼›1:ç°ä»˜ï¼›2:é¢„ä»˜ï¼›3:ä¿¡ç”¨ä½                                     |
| - cancelType            | Integer    | å–æ¶ˆç±»å‹ï¼›0:å…è´¹å–æ¶ˆï¼›1:é™æ—¶å–æ¶ˆï¼›2:ä¸å¯å–æ¶ˆ                                     |
| - stockType             | Integer    | åº“å­˜ç±»å‹ï¼›0:æˆ¿å‹åº“å­˜(é»˜è®¤)ï¼›1:äº§å“åº“å­˜(å…¨æ¸ é“å…±äº«)ï¼›2:äº§å“æ¸ é“ç‹¬äº«åº“å­˜ [ç›®å‰åªæ”¯æŒæˆ¿å‹åº“å­˜]          |
| - maxOccupancy          | Integer    | æœ€å¤§å…¥ä½äººæ•°ï¼›0 è¡¨ç¤ºä¸é™åˆ¶ [æš‚ä¸æ”¯æŒ]                                         |
| - productPromotions     | Object     | ä¿ƒé”€ä¿¡æ¯ [æš‚ä¸æ”¯æŒ]                                                   |
| - - promotionType       | Integer    | ä¿ƒé”€ç±»å‹ ç¤ºä¾‹ï¼š"TTTJ"å¤©å¤©ç‰¹ä»·ï¼›"TQYD"æå‰é¢„å®šï¼›"LZYH"è¿ä½ä¼˜æƒ ï¼›                     |
| - - promotionRule       | String     | ä¿ƒé”€è§„åˆ™                                                          |
| - - promotionDesc       | String     | ä¿ƒé”€æè¿°                                                          |
| - - startDate           | String     | ä¿ƒé”€å¼€å§‹æ—¶é—´ï¼›yyyy-MM-ddï¼Œä¸ºç©ºä¸é™åˆ¶                                       |
| - - endDate             | String     | ä¿ƒé”€ç»“æŸæ—¶é—´ï¼›yyyy-MM-ddï¼Œä¸ºç©ºä¸é™åˆ¶                                       |
| - ratePlan              | Object     | ä»·æ ¼æ–¹æ¡ˆ                                                          |
| - - ratePlanId          | Long       | ä»·æ ¼æ–¹æ¡ˆ ID                                                       |
| - - ratePlanName        | String     | ä»·æ ¼æ–¹æ¡ˆåç§°                                                        |
| - - ratePlanType        | Integer    | ä»·æ ¼æ–¹æ¡ˆç±»å‹ (0:æ™®é€šæˆ¿ä»·æ ¼ï¼Œ1:é’Ÿç‚¹æˆ¿ä»·æ ¼) [æš‚ä¸æ”¯æŒé’Ÿç‚¹æˆ¿ä»·æ ¼]                          |
| - - startDate           | String     | å¼€å§‹æ—¥æœŸ yyyymmdd                                                 |
| - - endDate             | String     | ç»“æŸæ—¥æœŸ yyyymmdd                                                 |
| - - ratePlanTimeBuckets | List       | ä»·æ ¼æ–¹æ¡ˆæ¯æ—¥æ—¶é—´æ®µï¼›ä¸ºç©ºè¡¨ç¤ºå…¨å¤©æœ‰æ•ˆï¼Œä»·æ ¼æ–¹æ¡ˆç±»å‹ä¸ºé’Ÿç‚¹æˆ¿ä»·æ ¼åˆ™éç©ºï¼›[æš‚ä¸æ”¯æŒé’Ÿç‚¹æˆ¿]                  |
| - - - startTime         | String     | å¼€å§‹æ—¶é—´ï¼›hh:mm:ss é’Ÿç‚¹æˆ¿ä½¿ç”¨å­—æ®µ                                         |
| - - - endTime           | String     | ç»“æŸæ—¶é—´ï¼›hh:mm:ss é’Ÿç‚¹æˆ¿ä½¿ç”¨å­—æ®µ                                         |
| - bookingRule           | Object     | é¢„å®šè§„åˆ™                                                          |
| - - bookingRuleId       | Long       | é¢„å®šè§„åˆ™ ID                                                       |
| - - bookingConfirmType  | Integer    | é¢„å®šç¡®è®¤ç±»å‹ (æ¯æ—¥çš„æœ‰é…ç½®ä¼˜å…ˆä½¿ç”¨)ï¼›0:é»˜è®¤(æ— é…ç½®)ã€1:å³æ—¶ç¡®è®¤(ä¿ç•™æˆ¿)ã€2:å¾…æŸ¥ã€3:é™æ—¶ç¡®è®¤         |
| - - minAmount           | Integer    | æœ€å°‘é¢„å®šæˆ¿é—´æ•°é‡ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                             |
| - - maxAmount           | Integer    | æœ€å¤§é¢„å®šæˆ¿é—´æ•°é‡ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                             |
| - - minDays             | Integer    | æœ€å°‘å…¥ä½å¤©æ•°ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                               |
| - - maxDays             | Integer    | æœ€å¤§å…¥ä½å¤©æ•°ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                                               |
| - - minAdvHours         | Integer    | æœ€å°‘æå‰é¢„è®¢æ—¶é—´(ä»¥ç”¨æˆ·é€‰æ‹©çš„å…¥ä½æ—¥æœŸçš„ 23:59:59 è®¡ç®—)ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                    |
| - - maxAdvHours         | Integer    | æœ€å¤§æå‰é¢„å®šæ—¶é—´(ä»¥ç”¨æˆ·é€‰æ‹©çš„å…¥ä½æ—¥æœŸçš„ 23:59:59 è®¡ç®—)ï¼›0 è¡¨ç¤ºä¸ºæ— é™åˆ¶                    |
| - cancelRule            | Object     | å–æ¶ˆè§„åˆ™                                                          |
| - - cancelRuleId        | Long       | å–æ¶ˆè§„åˆ™ ID                                                       |
| - - cancelType          | Integer    | å–æ¶ˆç±»å‹ï¼›0:å…è´¹å–æ¶ˆï¼›1:é™æ—¶å–æ¶ˆï¼›2:ä¸å¯å–æ¶ˆ                                     |
| - - cancelTimeType      | Integer    | å–æ¶ˆæ—¶é—´ç±»å‹ï¼›0:æ—¶é—´(cancelDaysAgo+cancelTimeAgo)ï¼›1:å°æ—¶(cancelHoursAgo) |
| - - cancelDaysAgo       | Integer    | N å¤©å‰                                                          |
| - - cancelTimeAgo       | String     | N ç‚¹å‰ eg:18:30                                                 |
| - - cancelHoursAgo      | Integer    | å…¥ä½å‰ n å°æ—¶ (å…¥ä½å½“å¤© 24:00 å¾€å‰æ¨ N å°æ—¶)                                |
| - - deductionType       | Integer    | æ‰£è´¹çš„ç±»å‹ï¼›0:é»˜è®¤(ä¸æ‰£è´¹)ï¼›1:é¦–æ™šï¼›2:å…¨é¢                                     |
| - guarantee             | Object     | æ‹…ä¿ä¿¡æ¯                                                          |
| - - guaranteeType       | Integer    | æ‹…ä¿é‡‘ç±»å‹ï¼›0:é»˜è®¤(æ— )ï¼›1:é¦–æ™šæ‹…ä¿ï¼›2:å…¨é¢æ‹…ä¿                                   |
| - - guaranteeAmount     | BigDecimal | æ‹…ä¿é‡‘é¢                                                          |

#### ğŸ’¡ JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "hotelVid": 1000001,
    "roomTypeId": 100,
    "productId": 100,
    "productName": "æµ‹è¯•",
    "productType": 0,
    "mealType": 1,
    "mealCount": 2,
    "paymentType": 0,
    "cancelType": 0,
    "stockType": 0,
    "maxOccupancy": 0,
    "ratePlan": {
      "ratePlanId": 1,
      "ratePlanName": "TEST",
      "ratePlanType": 0,
      "startDate": "20210701",
      "endDate": "20220701",
      "ratePlanTimeBuckets": {
        "startTime": "10:00:00",
        "endTime": "22:00:00"
      }
    },
    "bookingRule": {
      "bookingRuleId": 122,
      "bookingConfirmType": 1,
      "minAmount": 0,
      "maxAmount": 0,
      "minDays": 0,
      "maxDays": 0,
      "minAdvHours": 0,
      "maxAdvHours": 0
    },
    "cancelRule": {
      "cancelRuleId": 123,
      "cancelType": 0,
      "cancelTimeType": 0,
      "cancelDaysAgo": 0,
      "cancelTimeAgo": "",
      "cancelHoursAgo": 0,
      "deductionType": 0
    },
    "guarantee": {
      "guaranteeType": 0,
      "guaranteeAmount": 0,
      "latestReservationTime": ""
    }
  }
}
```

## ğŸ“Š 2.4 é…’åº—åŠ¨æ€ä¿¡æ¯æ¥å£

### ğŸ“ˆ 2.4.1 é…’åº—æˆ¿å‹æ¯æ—¥æ˜ç»†

#### ğŸ“ è¯·æ±‚åœ°å€

```
{url}/roomType/listDailyDetails
```

#### ğŸ”‘ Header å‚æ•°

| å‚æ•°åç§°                    | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°         |
|-------------------------|------|--------|------------|
| x-acs-titc-access-token | æ˜¯    | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

#### ğŸ“¥ è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°

| å‚æ•°åç§°       | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹   | æè¿°                  |
|------------|------|--------|---------------------|
| hotelVid   | æ˜¯    | Long   | é…’åº— ID               |
| roomTypeId | å¦    | Long   | æˆ¿å‹ ID               |
| startDate  | æ˜¯    | String | å¼€å§‹æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |
| endDate    | æ˜¯    | String | ç»“æŸæ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |

#### ğŸ“¤ è¿”å›æ•°æ®è¯´æ˜

| å‚æ•°åç§°                  | æ•°æ®ç±»å‹    | æè¿°             |
|-----------------------|---------|----------------|
| code                  | String  | è¿”å›ç             |
| message               | String  | è¿”å›æ¶ˆæ¯           |
| data                  | Object  | è¿”å›æ•°æ®           |
| - hotelVid            | Long    | é…’åº— ID          |
| - roomTypeDailyGroups | List    | æˆ¿å‹æ¯æ—¥æ˜ç»†åˆ†ç»„       |
| - - roomTypeId        | Long    | æˆ¿å‹ ID          |
| - - roomTypeDaily     | List    | æˆ¿å‹æ¯æ—¥æ˜ç»†         |
| - - - date            | Integer | æ—¥æœŸï¼›yyyymmdd    |
| - - - totalCount      | Integer | æ€»åº“å­˜(æˆ¿å‹)        |
| - - - availableCount  | Integer | å¯ç”¨åº“å­˜(æˆ¿å‹)       |
| - - - state           | Integer | æ˜¯å¦æœ‰æ•ˆï¼›0:æ— æ•ˆï¼›1:æœ‰æ•ˆ |

#### ğŸ’¡ JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "hotelVid": 200010,
    "roomTypeDailyGroups": [
      {
        "roomTypeId": 109,
        "roomTypeDaily": [
          {
            "date": "20210807",
            "totalCount": 15,
            "availableCount": 15,
            "state": 1
          }
        ]
      }
    ]
  }
}
```

#### 2.4.2 é…’åº—äº§å“æ¯æ—¥æ˜ç»†

- è¯·æ±‚åœ°å€ï¼š{url}/product/hotelListDailyDetails
- Header å‚æ•°

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | x-acs-titc-access-token | æ˜¯ | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | hotelVid | æ˜¯ | Long | é…’åº— ID |
  | roomTypeId | å¦ | Long | æˆ¿å‹ ID |
  | productId | å¦ | Long | äº§å“ ID |
  | startDate | æ˜¯ | String | å¼€å§‹æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |
  | endDate | æ˜¯ | String | ç»“æŸæ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | Object | è¿”å›æ•°æ® |
  | - hotelVid | Long | é…’åº— ID |
  | - productDailyGroups | LIST | äº§å“æ¯æ—¥æ˜ç»†åˆ†ç»„ |
  | - - productId | Long | äº§å“ ID |
  | - - productDaily | LIST | äº§å“æ¯æ—¥æ˜ç»† |
  | - - - productId | Long | äº§å“ ID |
  | - - - ratePlanId | Long | ä»·æ ¼æ–¹æ¡ˆ ID |
  | - - - date | String | æ—¥æœŸï¼›yyyymmdd |
  | - - - rate | BigDecimal | ä»·æ ¼ |
  | - - - totalCount | Integer | æ€»åº“å­˜(äº§å“) [äº§å“åº“å­˜ä½¿ç”¨ï¼Œç›®å‰å‡æ˜¯æˆ¿å‹åº“å­˜æš‚ä¸ä½¿ç”¨] |
  | - - - availableCount | Integer | å¯ç”¨åº“å­˜(äº§å“) [äº§å“åº“å­˜ä½¿ç”¨ï¼Œç›®å‰å‡æ˜¯æˆ¿å‹åº“å­˜æš‚ä¸ä½¿ç”¨] |
  | - - - mealType | Integer | é¤é£Ÿç±»å‹ï¼›0: æœªçŸ¥ï¼›1:æ—©é¤ï¼›2 åˆé¤ï¼›3:æ™šé¤ |
  | - - - mealCount | Integer | é¤é£Ÿä»½æ•° |
  | - - - bookingConfirmType | Integer | é¢„å®šç¡®è®¤ç±»å‹ï¼š0: é»˜è®¤(æ— é…ç½®)ã€1:å³æ—¶ç¡®è®¤(ä¿ç•™æˆ¿)ã€2: å¾…æŸ¥ã€3: é™æ—¶ç¡®è®¤ |
  | - - - state | Integer | æ˜¯å¦æœ‰æ•ˆï¼›0: æ— æ•ˆï¼›1:æœ‰æ•ˆ |

- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "hotelVid": 200010,
    "productDailyGroups": [
      {
        "productId": 1108,
        "productDaily": [
          {
            "productId": 1108,
            "ratePlanId": 44,
            "date": "20210807",
            "rate": 78,
            "totalCount": 12,
            "availableCount": 10,
            "mealType": 1,
            "mealCount": 2,
            "bookingConfirmType": 0,
            "state": 1
          }
        ]
      }
    ]
  }
}
```

### 2.5 é…’åº—é¢„å®šæ¥å£

#### 2.5.1 ä¸‹å•æ¥å£

- è¯·æ±‚åœ°å€ï¼š{url}/order/create

- Header å‚æ•°

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | x-acs-titc-access-token | æ˜¯ | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿°                                        |
    | --- | --- | --- |-------------------------------------------|
  | drpOrderId | æ˜¯ | String | å¤–éƒ¨è®¢å•å·                                     |
  | hotelVid | æ˜¯ | Long | é…’åº— ID                                     |
  | roomTypeId | æ˜¯ | Long | æˆ¿å‹ ID                                     |
  | productId | æ˜¯ | Long | äº§å“ ID                                     |
  | checkInDate | æ˜¯ | String | å…¥ä½æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd                       |
  | checkOutDate | æ˜¯ | String | ç¦»åº—æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd                       |
  | count | æ˜¯ | Integer | é¢„å®šæ•°é‡                                      |
  | totalAmount | æ˜¯ | BigDecimal | æ€»é‡‘é¢                                       |
  | payAmount | æ˜¯ | BigDecimal | å®ä»˜é‡‘é¢                                      |
  | discountAmount | å¦ | BigDecimal | æŠ˜æ‰£é‡‘é¢                                      |
  | guaranteeType | å¦ | Integer | æ‹…ä¿ç±»å‹ï¼›æ‹…ä¿é‡‘ç±»å‹ï¼›0:é»˜è®¤å€¼(æ— æ„ä¹‰)ï¼›1ï¼šæ— æ‹…ä¿ï¼›2:é¦–æ™šæ‹…ä¿ï¼›3:å…¨é¢æ‹…ä¿ |
  | guaranteeAmount | å¦ | BigDecimal | æ‹…ä¿é‡‘é¢                                      |
  | orderDailyDetails | æ˜¯ | List | è®¢å•æ¯æ—¥æ˜ç»†é›†åˆ                                  |
  | - date | æ˜¯ | String | æ—¥æœŸï¼›yyyy-MM-dd                             |
  | - rate | æ˜¯ | BigDecimal | ä»·æ ¼                                        |
  | - mealType | å¦ | Integer | é¤é£Ÿç±»å‹ï¼›0: æœªçŸ¥ï¼›1:æ—©é¤ï¼›2 åˆé¤ï¼›3:æ™šé¤                 |
  | - mealCount | å¦ | Integer | é¤é£Ÿä»½æ•°                                      |
  | contactName | æ˜¯ | String | è”ç³»äºº                                       |
  | contactPhone | æ˜¯ | String | è”ç³»äººç”µè¯                                     |
  | contactEmail | å¦ | String | è”ç³»äººé‚®ç®±                                     |
  | memberNo | å¦ | String | ä¼šå‘˜å¡å·                                      |
  | memberLevel | å¦ | Integer | ä¼šå‘˜ç­‰çº§                                      |
  | guests | æ˜¯ | List | å…¥ä½äººä¿¡æ¯é›†åˆ(é¢„å®šå¤šä¸ªæˆ¿é—´å…¥ä½äººéœ€è¦ä¼ å¤šæ¡)                   |
  | - guestType | æ˜¯ | Integer | å…¥ä½äººç±»å‹ï¼›0ï¼Œè¡¨ç¤ºæˆäººï¼›1ï¼Œè¡¨ç¤ºå„¿ç«¥ï¼›                      |
  | - guestName | æ˜¯ | String | å…¥ä½äººå§“å                                     |
  | - guestFirstName | å¦ | String | å…¥ä½äººè‹±æ–‡å                                    |
  | - guestLastName | å¦ | String | å…¥ä½äººè‹±æ–‡å§“                                    |
  | - age | å¦ | Integer | å¹´é¾„                                        |
  | - idType | å¦ | Integer | è¯ä»¶ç±»å‹                                      |
  | - idNo | å¦ | String | è¯ä»¶å·ç                                       |
  | guestBenefits | å¦ | List | å®¢æˆ·æƒç›Šé›†åˆ                                    |
  | - benefitName | æ˜¯ | String | æƒç›Šåç§°                                      |
  | - quantity | æ˜¯ | Integer | æƒç›Šä»½æ•°                                      |
  | - effectDate | æ˜¯ | String | æƒç›Šç”Ÿæ•ˆæ—¥æœŸï¼›yyyy-MM-dd                         |
  | - benefitDesc | å¦ | String | æƒç›Šæè¿°                                      |
  | latestReservationTimeType | æ˜¯ | Integer | æœ€æ™šä¿ç•™æ—¶é—´ç±»å‹ï¼›0:å½“å¤©ï¼›1:æ¬¡æ—¥                        |
  | latestReservationTime | æ˜¯ | String | æœ€æ™šä¿ç•™æ—¶é—´ï¼›eg:18:00                           |
  | earlyArrivalTime | å¦ | String | æœ€æ—©åˆ°åº—æ—¶é—´ï¼›yyyy-MM-dd HH:mm:ss                |
  | lastArrivalTime | å¦ | String | æœ€æ™šåˆ°åº—æ—¶é—´ï¼›yyyy-MM-dd HH:mm:ss                |
  | currency | æ˜¯ | String | å¸ç§ï¼›é»˜è®¤ CNY                                 |
  | clientIp | æ˜¯ | String | å®¢æˆ·ç«¯ IP                                    |
  | guestNoticeInfo | å¦ | String | ç”¨æˆ·å¤‡æ³¨ä¿¡æ¯                                    |
  | guestInvoiceInfo | å¦ | String | ç”¨æˆ·å¼€ç¥¨ä¿¡æ¯                                    |
  | remark | å¦ | String | å¤‡æ³¨                                        |
  | cancelRule | å¦ | Object | å–æ¶ˆè§„åˆ™(éœ€ç™½åå•é…ç½®ï¼Œæœªé…ç½®ä¼ å…¥è¯¥èŠ‚ç‚¹ç›´æ¥æŠ¥é”™)                 |
  | - cancelType | å¦ | Integer | å–æ¶ˆç±»å‹ï¼›0: å…è´¹å–æ¶ˆï¼›1: é™æ—¶å–æ¶ˆï¼›2: ä¸å¯å–æ¶ˆ              |
  | - cancelTimeType | å¦ | Integer | 0: æ—¶é—´ (cancelDaysAgo+cancelTimeAgo)ï¼›1:å°æ—¶ (cancel_hour_ago) |
  | - cancelDaysAgo | å¦ | Integer | N å¤©å‰                                      |
  | - cancelTimeAgo | å¦ | String | N ç‚¹å‰ eg:18:30                             |
  | - cancelHoursAgo | å¦ | Integer | å…¥ä½å‰ n å°æ—¶ (å…¥ä½å½“å¤© 24:00 å¾€å‰æ¨ N å°æ—¶) |
  | - deductionType | å¦ | Integer | æ‰£è´¹çš„ç±»å‹ï¼›0: é»˜è®¤(ä¸æ‰£è´¹)ï¼›1: é¦–æ™šï¼›2:å…¨é¢               |

- JSON ç¤ºä¾‹

```json
{
  "drpOrderId": "20210526123534",
  "hotelVid": 100001,
  "roomTypeId": 120000,
  "productId": 1234,
  "checkInDate": "2021-07-01",
  "checkOutDate": "2021-07-02",
  "count": 1,
  "totalAmount": 888,
  "payAmount": 888,
  "discountAmount": 0,
  "guaranteeType": null,
  "guaranteeAmount": null,
  "orderDailyDetails": [
    {
      "date": "2021-07-01",
      "rate": 888,
      "mealType": 1,
      "mealCount": 2
    }
  ],
  "contactName": "kris",
  "contactPhone": "18988889999",
  "contactEmail": "null",
  "memberNo": "null",
  "memberLevel": null,
  "guests": [
    {
      "guestType": 1,
      "guestName": "æµ‹è¯•",
      "guestFirstName": "Yun",
      "guestLastName": "Bai",
      "age": null,
      "idType": null,
      "idNo": "null"
    }
  ],
  "guestBenefits": [
    {
      "benefitName": "å»¶è¿Ÿé€€æˆ¿",
      "quantity": 1,
      "effectDate": "2021-07-02",
      "benefitDesc": "å»¶è¿Ÿé€€æˆ¿ï¼Œå¯å»¶è¿Ÿåˆ°15:00 é€€æˆ¿"
    }
  ],
  "latestReservationTimeType": 0,
  "latestReservationTime": "18:00",
  "currency": "CNY",
  "clientIp": "192.168.0.1",
  "guestNoticeInfo": "æµ‹è¯•",
  "guestInvoiceInfo": "ä¸å¼€",
  "remark": "æµ‹è¯•"
}
```

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | Object | è¿”å›æ•°æ® |
  | - drpOrderId | String | å¤–éƒ¨è®¢å•å· |
  | - orderId | String | åˆ†é”€ç³»ç»Ÿè®¢å•å· |
  | - totalAmount | BigDecimal | æ€»é‡‘é¢ |
  | - state | Integer | è®¢å•çŠ¶æ€ï¼š0:é¢„å®šçŠ¶æ€ï¼Œ1:å¾…ç¡®è®¤ï¼Œ2:å¾…å…¥ä½ï¼Œ3:å·²å…¥ä½ï¼Œ4:å·²ç¦»åº—ï¼Œ5:å·²å–æ¶ˆï¼Œ6: noshowï¼Œ7: æ‹’å• |
  | - cancelRule | Object | å–æ¶ˆè§„åˆ™ |
  | - - cancelType | Integer | å–æ¶ˆç±»å‹ï¼›0:å…è´¹å–æ¶ˆï¼›1:é™æ—¶å–æ¶ˆï¼›2:ä¸å¯å–æ¶ˆ |
  | - - cancelTimeType | Integer | å–æ¶ˆæ—¶é—´ç±»å‹ï¼›0: æ—¶é—´ (cancel_days_ago+cancel_time_ago)ï¼›1:å°æ—¶(cancel_hour_ago) |
  | - - cancelDaysAgo | Integer | N å¤©å‰ |
  | - - cancelTimeAgo | String | N ç‚¹å‰ |
  | - - cancelHoursAgo | Integer | å…¥ä½å‰ n å°æ—¶(å…¥ä½å½“å¤© 24:00 å¾€å‰æ¨ N å°æ—¶) |
  | - - deductionType | Integer | æ‰£è´¹çš„ç±»å‹ï¼›0:é»˜è®¤(ä¸æ‰£è´¹)ï¼›1: é¦–æ™šï¼›2:å…¨é¢ |
- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "drpOrderId": "20210526123534",
    "orderId": "21052660859841456",
    "totalAmount": 888,
    "state": 2,
    "cancelRule": {
      "cancelType": 1,
      "cancelTimeType": 1,
      "cancelDaysAgo": 0,
      "cancelTimeAgo": "",
      "cancelHoursAgo": 6,
      "deductionType": 0
    }
  }
}
```

#### 2.5.2 å–æ¶ˆæ¥å£

- è¯·æ±‚åœ°å€ï¼š{url}/order/cancel

- Header å‚æ•°

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | x-acs-titc-access-token | æ˜¯ | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | drpOrderId | æ˜¯ | String | å¤–éƒ¨è®¢å•å· |
  | orderId | æ˜¯ | String | åˆ†é”€ç³»ç»Ÿè®¢å•å· |
  | hotelVid | æ˜¯ | Long | é…’åº— ID |
  | reason | æ˜¯ | String | å–æ¶ˆåŸå›  |

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | Object | è¿”å›æ•°æ® |
  | - drpOrderId | String | å¤–éƒ¨è®¢å•å· |
  | - orderId | String | åˆ†é”€ç³»ç»Ÿè®¢å•å· |
  | - state | Integer | çŠ¶æ€ï¼›0:æˆåŠŸï¼Œ1:å–æ¶ˆå¤±è´¥(å¯ä»¥é‡è¯•æˆ–è€…çº¿ä¸‹è·Ÿè¿›)ï¼Œ2:å–æ¶ˆæ‹’ç»(æ— æ³•é‡è¯•)ï¼Œ3:å–æ¶ˆç¡®è®¤ä¸­(å¾…å®š) |
  | - deductionAmount | BigDecimal | æ‰£è´¹é‡‘é¢ |

- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "drpOrderId": "20210526123534",
    "orderId": "21052660859841456",
    "state": 0,
    "deductionAmount": 0
  }
}
```

#### 2.5.3 äº§å“å¯å®šæ£€æŸ¥æ¥å£

- è¯·æ±‚åœ°å€ï¼š{url}/order/reserveValidateByProductId

- Header å‚æ•°

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | x-acs-titc-access-token | æ˜¯ | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | hotelVid | æ˜¯ | Long | é…’åº— ID |
  | roomTypeId | æ˜¯ | Long | æˆ¿å‹ ID |
  | productId | æ˜¯ | Long | äº§å“ ID |
  | checkInDate | æ˜¯ | String | å…¥ä½æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |
  | checkOutDate | æ˜¯ | String | ç¦»åº—æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |
  | count | æ˜¯ | Integer | é¢„å®šæ•°é‡ |
  | orderDailyDetails | æ˜¯ | List | è®¢å•æ¯æ—¥æ˜ç»†é›†åˆ |
  | - date | æ˜¯ | String | æ—¥æœŸï¼›yyyy-MM-dd |
  | - rate | æ˜¯ | BigDecimal | ä»·æ ¼ |
  | - mealType | å¦ | Integer | é¤é£Ÿç±»å‹ï¼›0: æœªçŸ¥ï¼›1:æ—©é¤ï¼›2 åˆé¤ï¼›3:æ™šé¤ |
  | - mealCount | å¦ | Integer | é¤é£Ÿä»½æ•° |
  | occupant | å¦ | Object | å…¥ä½è€…ä¿¡æ¯ |
  | - adults | å¦ | Integer | æ€»æˆäººæ•°= é—´æ•°* æ¯é—´æœ€å¤§å…¥ä½æˆäººæ•°ï¼› |
  | - children | å¦ | Integer | æ€»å„¿ç«¥äººæ•° |
  | - occupantAges | å¦ | List | å…¥ä½è€…å¹´é¾„ä¿¡æ¯ |
  | - - type | å¦ | Integer | ç”¨æˆ·ç±»å‹ï¼›0ï¼Œè¡¨ç¤ºæˆäººï¼›1ï¼Œè¡¨ç¤ºå„¿ç«¥ |
  | - - age | å¦ | Integer | å¹´é¾„ |


- JSON ç¤ºä¾‹

```json
{
  "hotelVid": 100001,
  "roomTypeId": 120000,
  "productId": 1234,
  "checkInDate": "2021-07-01",
  "checkOutDate": "2021-07-02",
  "count": 1,
  "orderDailyDetails": [
    {
      "date": "2021-07-01",
      "rate": 888,
      "mealType": 1,
      "mealCount": 2
    }
  ],
  "occupant": {
    "adults": 1,
    "children": 0,
    "occupantAges": [
      {
        "type": 1,
        "age": 6
      }
    ]
  }
}
```

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | Object | è¿”å›æ•°æ® |
  | - hotelVid | Long | é…’åº— ID |
  | - roomTypeId | Long | æˆ¿å‹ ID |
  | - productId | Long | äº§å“ ID |
  | - maxAvailableStock | Integer | é¢„å®šæ—¶é—´å†…æœ€å¤§å¯é¢„å®šæ•°é‡ |
  | - state | Integer | å¯å®šçŠ¶æ€ï¼š0:å¯å®š 1:æ»¡æˆ¿ 2:å…³æˆ¿ 3:æ— æ•ˆä»·æ ¼æ–¹æ¡ˆ 4:ä»·æ ¼ä¸ç¬¦5:ä¸æ»¡è¶³é¢„è®¢è§„åˆ™ 6:å…¶ä»–ä¸å¯æ“ä½œ |
  | - productDailys | List | äº§å“æ¯æ—¥æ˜ç»† |
  | - - date | String | æ—¥æœŸï¼›yyyy-mm-dd |
  | - - rate | BigDecimal | ä»·æ ¼ |
  | - - state | Integer | çŠ¶æ€ï¼›0:æ— æ•ˆï¼›1 æœ‰æ•ˆ |
  | - - availableStock | Integer | å¯ç”¨åº“å­˜ |
  | - - mealType | Integer | é¤é£Ÿç±»å‹ï¼›0:æœªçŸ¥ï¼›1:æ—©é¤ï¼›2 åˆé¤ï¼›3:æ™šé¤ |
  | - - mealCount | Integer | é¤é£Ÿä»½æ•° |
  | - cancelRule | Object | å–æ¶ˆè§„åˆ™ |
  | - - cancelType | Integer | å–æ¶ˆç±»å‹ï¼›0:å…è´¹å–æ¶ˆï¼›1:é™æ—¶å–æ¶ˆï¼›2:ä¸å¯å–æ¶ˆ |
  | - - cancelTimeType | Integer | å–æ¶ˆæ—¶é—´ç±»å‹ï¼›0: æ—¶é—´ (cancel_days_ago+cancel_time_ago)ï¼›1: å°æ—¶ (cancel_hour_ago) |
  | - - cancelDaysAgo | Integer | N å¤©å‰ |
  | - - cancelTimeAgo | String | N ç‚¹å‰ |
  | - - cancelHoursAgo | Integer | å…¥ä½å‰ n å°æ—¶(å…¥ä½å½“å¤© 24:00 å¾€å‰æ¨ N å°æ—¶) |
  | - - deductionType | Integer | æ‰£è´¹çš„ç±»å‹ï¼›0:é»˜è®¤(ä¸æ‰£è´¹)ï¼›1:é¦–æ™šï¼›2:å…¨é¢ |


- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "hotelVid": 200010,
    "roomTypeId": 109,
    "state": 0,
    "productId": 1108,
    "maxAvailableStock": 15,
    "productDailys": [
      {
        "date": "2021-08-09",
        "rate": 78,
        "state": 1,
        "availableStock": 15,
        "mealType": 1,
        "mealCount": 2
      }
    ],
    "cancelRule": {
      "cancelType": 0,
      "cancelTimeType": 1,
      "cancelDaysAgo": 0,
      "cancelTimeAgo": "",
      "cancelHoursAgo": 0,
      "deductionType": 0
    }
  }
}
```

#### 2.5.4 è®¢å•æŸ¥è¯¢æ¥å£

- è¯·æ±‚åœ°å€ï¼š{url}/order/getByOrderId

- Header å‚æ•°

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | x-acs-titc-access-token | æ˜¯ | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | orderId | æ˜¯ | String | åˆ†é”€è®¢å•å· |

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | Object | è¿”å›æ•°æ® |
  | - drpOrderId | String | å¤–éƒ¨è®¢å•å· |
  | - orderId | String | åˆ†é”€ç³»ç»Ÿè®¢å•å· |
  | - hotelVid | Long | é…’åº— ID |
  | - hotelName | String | é…’åº—åç§° |
  | - roomTypeId | Long | æˆ¿å‹ ID |
  | - roomTypeName | String | æˆ¿å‹åç§° |
  | - productId | Long | äº§å“ ID |
  | - productName | String | äº§å“åç§° |
  | - checkInDate | String | å…¥ä½æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |
  | - checkOutDate | String | ç¦»åº—æ—¥æœŸï¼›æ ¼å¼ä¸º yyyy-MM-dd |
  | - days | Integer | é—´å¤œ |
  | - count | Integer | é¢„å®šæ•°é‡ |
  | - totalAmount | BigDecimal | æ€»é‡‘é¢ |
  | - payAmount | BigDecimal | å®ä»˜é‡‘é¢ |
  | - discountAmount | BigDecimal | æŠ˜æ‰£é‡‘é¢ |
  | - paymentType | Integer | æ”¯ä»˜ç±»å‹(0: æœªçŸ¥ 1. ç°ä»˜ 2.é¢„ä»˜) |
  | - guaranteeType | Integer | æ‹…ä¿ç±»å‹ï¼›æ‹…ä¿é‡‘ç±»å‹ï¼›0: é»˜è®¤å€¼(æ— æ„ä¹‰)ï¼›1:æ— æ‹…ä¿ï¼›2:é¦–æ™šæ‹…ä¿ï¼›3:å…¨é¢æ‹…ä¿ |
  | - guaranteeAmount | BigDecimal | æ‹…ä¿é‡‘é¢ |
  | - orderDailyDetails | List | è®¢å•æ¯æ—¥æ˜ç»†é›†åˆ |
  | - - date | String | æ—¥æœŸï¼šyyyymmdd |
  | - - rate | BigDecimal | ä»·æ ¼ |
  | - - mealType | Integer | é¤é£Ÿç±»å‹ï¼›0: æœªçŸ¥ï¼›1:æ—©é¤ï¼›2 åˆé¤ï¼›3:æ™šé¤ |
  | - - mealCount | Integer | é¤é£Ÿä»½æ•° |
  | - contactName | String | è”ç³»äºº |
  | - contactPhone | String | è”ç³»äººç”µè¯ |
  | - contactEmail | String | è”ç³»äººé‚®ç®± |
  | - memberNo | String | ä¼šå‘˜å¡å· |
  | - memberLevel | String | ä¼šå‘˜ç­‰çº§ |
  | - state | Integer | è®¢å•çŠ¶æ€ï¼›0: é¢„å®šçŠ¶æ€ï¼Œ1: å¾…ç¡®è®¤ï¼Œ2:å¾…å…¥ä½ï¼Œ3:å·²å…¥ä½ï¼Œ4:å·²ç¦»åº—ï¼Œ5:å·²å–æ¶ˆï¼Œ6: noshowï¼Œ7 æ‹’å• |
  | - guests | List | å…¥ä½äººä¿¡æ¯é›†åˆ |
  | - - guestType | Integer | å…¥ä½äººç±»å‹ï¼›0ï¼Œè¡¨ç¤ºæˆäººï¼›1ï¼Œè¡¨ç¤ºå„¿ç«¥ï¼› |
  | - - guestName | String | å…¥ä½äººå§“å |
  | - - guestFirstName | String | å…¥ä½äººè‹±æ–‡å |
  | - - guestLastName | String | å…¥ä½äººè‹±æ–‡å§“ |
  | - - age | Integer | å¹´é¾„ |
  | - - idType | Integer | è¯ä»¶ç±»å‹ 0:èº«ä»½è¯ [ç›®å‰åªæ”¯æŒèº«ä»½è¯] |
  | - - idNo | String | è¯ä»¶å·ç  |
  | - cancelRule | Object | å–æ¶ˆè§„åˆ™ |
  | - - cancelType | Integer | å–æ¶ˆç±»å‹ï¼›0: å…è´¹å–æ¶ˆï¼›1: é™æ—¶å–æ¶ˆï¼›2:ä¸å¯å–æ¶ˆ |
  | - - cancelTimeType | Integer | å–æ¶ˆæ—¶é—´ç±»å‹ï¼›0: æ—¶é—´ (cancel_days_ago+cancel_time_ago)ï¼›1: å°æ—¶ (cancel_hour_ago) |
  | - - cancelDaysAgo | Integer | N å¤©å‰ |
  | - - cancelTimeAgo | String | N ç‚¹å‰ |
  | - - cancelHoursAgo | Integer | å…¥ä½å‰ n å°æ—¶ (å…¥ä½å½“å¤© 24:00 å¾€å‰æ¨ Nå°æ—¶) |
  | - - deductionType | Integer | æ‰£è´¹çš„ç±»å‹ï¼›0: é»˜è®¤(ä¸æ‰£è´¹)ï¼›1:é¦–æ™šï¼›2:å…¨é¢ |
  | - latestReservationTimeType | Integer | æœ€æ™šä¿ç•™æ—¶é—´ç±»å‹ï¼›0 :å½“å¤©ï¼›1 :æ¬¡æ—¥ |
  | - latestReservationTime | String | æœ€æ™šä¿ç•™æ—¶é—´ï¼›eg:18:00 |
  | - earlyArrivalTime | String | æœ€æ—©åˆ°åº—æ—¶é—´ï¼›yyyy-MM-dd HH:mm:ss |
  | - lastArrivalTime | String | æœ€æ™šåˆ°åº—æ—¶é—´ï¼›yyyy-MM-dd HH:mm:ss |
  | - reason | String | å–æ¶ˆåŸå›  |
  | - remark | String | å¤‡æ³¨ |
  | - createTime | String | åˆ›å»ºæ—¶é—´ï¼›yyyy-MM-dd HH:mm:ss |
  | - updateTime | String | æ›´æ–°æ—¶é—´ï¼›yyyy-MM-dd HH:mm:ss |


- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "drpOrderId": "12345678912",
    "orderId": "21080881906553553",
    "hotelVid": 200010,
    "supplierHotelId": "802697",
    "hotelName": "åŒ—äº¬é€Ÿå…«é²è°·å°æ¹¾è¡—åº—(é€Ÿè¾¾çš®è‚¤)",
    "roomTypeId": 109,
    "roomTypeName": "ä¸»é¢˜å¤§åºŠ",
    "productId": 1108,
    "productName": "ä¸»é¢˜å¤§åºŠ-ä¸å«æ—©(é¢„ä»˜)",
    "checkInDate": "2021-08-08",
    "checkOutDate": "2021-08-09",
    "days": 1,
    "count": 1,
    "paymentType": 2,
    "totalAmount": 78,
    "payAmount": 78,
    "discountAmount": 0,
    "guaranteeAmount": 0,
    "orderDailyDetails": [
      {
        "date": "20210808",
        "drpRate": 78,
        "mealType": 1,
        "mealCount": 0
      }
    ],
    "memberNo": "",
    "contactName": "kris",
    "contactPhone": "18900009999",
    "contactEmail": "",
    "guests": [
      {
        "guestType": 1,
        "guestName": "kris",
        "guestFirstName": "",
        "guestLastName": "",
        "age": 0,
        "idType": 0,
        "idNo": ""
      }
    ],
    "cancelRule": {
      "cancelType": 0,
      "cancelTimeType": 1,
      "cancelDaysAgo": 0,
      "cancelTimeAgo": "",
      "cancelHoursAgo": 0,
      "deductionType": 0
    },
    "state": 5,
    "latestReservationTimeType": 0,
    "latestReservationTime": "",
    "earlyArrivalTime": "",
    "lastArrivalTime": "",
    "guestRemarkInfo": "",
    "guestInvoiceInfo": "",
    "reason": "drp cancel!!",
    "createTime": "2021-08-08 10:12:16",
    "updateTime": "2021-08-08 10:47:31"
  }
}
```

### 2.6 é…’åº—ä¿¡æ¯å˜åŒ–é€šçŸ¥

- è°ƒç”¨æ–¹ï¼šæ—…æ™ºåˆ†é”€å¹³å°
- æ¥å£æä¾›æ–¹ï¼šåˆ†é”€å•†
- è¯´æ˜ï¼šurl:ä¸ºåˆ†é”€å•†æä¾›çš„æœåŠ¡åœ°å€
- è¯·æ±‚åœ°å€ï¼š{url}/hotelNotify
- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | hotelVid | æ˜¯ | Long | é…’åº— id |
  | startDate | å¦ | String | å¼€å§‹æ—¶é—´(å˜æ›´ç±»å‹ä¸º:AvailRooms,ProductRoomState,Rate æ—¶å¿…ä¼ ) |
  | endDate | å¦ | String | ç»“æŸæ—¶é—´(å˜æ›´ç±»å‹ä¸º:AvailRooms,ProductRoomState,Rate æ—¶å¿…ä¼ ) |
  | hotelChangeType | æ˜¯ | String | é…’åº—ä¿¡æ¯å˜æ›´é€šçŸ¥ç±»å‹(è§æšä¸¾å€¼) |
  | timestamp | æ˜¯ | Long | æ—¶é—´æˆ³ |
  | trackingId | æ˜¯ | String | è¯·æ±‚å”¯ä¸€ ID |


- JSON ç¤ºä¾‹

```json
{
  "hotelVid": 3330,
  "startDate": "2022-01-01",
  "endDate": "2022-05-01",
  "hotelChangeType": "Rate",
  "timestamp": 1644907835216,
  "trackingId": "750021d4-93d7-45dd-b719-434ec4956cea"
}
```

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | String | "success": æˆåŠŸ "fail": å¤±è´¥ |

- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": "success"
}
```

### 2.7 ä¼šå‘˜äº’é€š

#### 2.7.1 ç»‘å®šä¼šå‘˜

-

è¯´æ˜ï¼šå¯¹æ¥æ–¹è°ƒç”¨ç»‘å®šä¼šå‘˜æ¥å£è¿›è¡Œä¼šå‘˜ç»‘å®šï¼ˆé¦–æ¬¡ç»‘å®šæˆ–å‡çº§ä¼šå‘˜ç­‰çº§ï¼‰ã€‚å¦‚æœè¯¥ä¼šå‘˜åœ¨æœ¬ç³»ç»Ÿä¸­å°šæœªæ³¨å†Œï¼Œåˆ™æœ¬ç³»ç»Ÿä¼šæ ¹æ®è¯·æ±‚å‚æ•°ä¿¡æ¯è¿›è¡Œæ³¨å†Œï¼Œå¹¶ä¿è¯æ³¨å†Œçš„ä¼šå‘˜ç­‰çº§ä¸è¯·æ±‚å‚æ•°ä¸­çš„ç›®æ ‡ä¼šå‘˜ç­‰çº§ä¸€è‡´ã€‚å¦‚æœè¯¥ä¼šå‘˜åœ¨æœ¬ç³»ç»Ÿä¸­å·²ç»æ˜¯ä¼šå‘˜ï¼Œåˆ™å¯¹æ¥æ–¹éœ€å¯¹æ¯”ç°æœ‰ä¼šå‘˜ç­‰çº§ä¸å“åº”å‚æ•°ä¸­çš„ç›®æ ‡ä¼šå‘˜ç­‰çº§ï¼Œå¦‚æœç°æœ‰ä¼šå‘˜ç­‰çº§ä½äºç›®æ ‡ä¼šå‘˜ç­‰çº§ï¼Œåˆ™å¯¹æ¥æ–¹éœ€è¦å¯¹è¯¥ä¼šå‘˜è¿›è¡Œå‡çº§ã€‚

- è¯·æ±‚åœ°å€ï¼š{url}/member/bind

- Header å‚æ•°

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | x-acs-titc-access-token | æ˜¯ | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | blocCode | æ˜¯ | String | é›†å›¢ç¼–ç  |
  | eventType | æ˜¯ | Integer | æ“ä½œç±»å‹ï¼š1:ç»‘å®šï¼Œ2:å‡çº§ |
  | memberNo | å¦ | String | ä¼šå‘˜å¡å·(å‡çº§æ—¶å¿…å¡«) |
  | phoneNo | æ˜¯ | String | æ‰‹æœºå· |
  | name | å¦ | String | å§“å |
  | idType | æ˜¯ | Integer | è¯ä»¶ç±»å‹(ç›®å‰åªæ”¯æŒèº«ä»½è¯) 0:"èº«ä»½è¯" |
  | idNo | å¦ | String | è¯ä»¶å·ç  |
  | memberLevel | æ˜¯ | Integer | ä¼šå‘˜ç­‰çº§ |

- JSON ç¤ºä¾‹

```json
{
  "blocCode": "82671",
  "eventType": 1,
  "memberNo": "8172761",
  "memberLevel": 4,
  "name": "ä¼šå‘˜å§“å",
  "phoneNo": "11111111111",
  "idType": 0,
  "idNo": "110100205001011234"
}
```

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | Object | è¿”å›æ•°æ® |
  | - memberLevel | Integer | ä¼šå‘˜ç­‰çº§ï¼Œæšä¸¾å€¼ |
  | - memberNo | String | ä¼šå‘˜å¡å· |
  | - newMember | Boolean | æ˜¯å¦æ˜¯æ–°ä¼šå‘˜ |
  | - effectBeginDate | String | ç­‰çº§æœ‰æ•ˆæœŸçš„å¼€å§‹æ—¶é—´ æ ¼å¼ï¼šyyyy-mm-dd |
  | - effectEndDate | String | ç­‰çº§æœ‰æ•ˆæœŸçš„ç»“æŸæ—¶é—´ æ ¼å¼ï¼šyyyy-mm-dd |
  | - name | String | å§“å |
  | - phoneNo | String | ç”µè¯ |
  | - registerTime | String | æ³¨å†Œæ—¶é—´ æ ¼å¼ï¼šyyyy-mm-dd hh:mm:ss |


- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "memberLevel": "7",
    "memberNo": "530945277",
    "newMember": false,
    "effectBeginDate": "2021-09-29",
    "effectEndDate": "2022-09-29",
    "name": "ä¼šå‘˜å§“å",
    "phoneNo": "11111111111",
    "registerTime": "2021-09-29 14:24:37.0"
  }
}
```

#### 2.7.2 æŸ¥è¯¢ä¼šå‘˜ä¿¡æ¯

- è¯·æ±‚åœ°å€ï¼š{url}/member/search

- Header å‚æ•°

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | x-acs-titc-access-token | æ˜¯ | String | è°ƒç”¨è¯¥æ¥å£çš„è®¿é—®å‡­è¯ |

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | blocCode | æ˜¯ | String | é›†å›¢ code |
  | memberNo | æ˜¯ | String | ä¼šå‘˜å¡å· |
  | phoneNo | æ˜¯ | Long | æ‰‹æœºå· |

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | Object | è¿”å›æ•°æ® |
  | - memberLevel | String | ä¼šå‘˜ç­‰çº§ |
  | - memberNo | String | ä¼šå‘˜å¡å· |
  | - effectBeginDate | String | ç­‰çº§æœ‰æ•ˆæœŸçš„å¼€å§‹æ—¶é—´ æ ¼å¼ï¼šyyyy-mm-dd |
  | - effectEndDate | String | ç­‰çº§æœ‰æ•ˆæœŸçš„ç»“æŸæ—¶é—´ æ ¼å¼ï¼šyyyy-mm-dd |
  | - name | String | å§“å |
  | - phoneNo | String | ç”µè¯ |
  | - registerTime | String | æ³¨å†Œæ—¶é—´ æ ¼å¼ï¼šyyyy-mm-dd hh:mm:ss |


- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "memberLevel": "7",
    "memberNo": "530945277",
    "effectBeginDate": "2021-09-29",
    "effectEndDate": "2022-09-29",
    "name": "ä¼šå‘˜å§“å",
    "phoneNo": "11111111111",
    "registerTime": "2021-09-29 14:24:37.0"
  }
}
```

#### 2.7.3 ä¼šå‘˜ä¿¡æ¯å˜åŒ–é€šçŸ¥

- è¯·æ±‚åœ°å€ï¼š{url}/member/notify

- è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜

  | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- | --- |
  | memberNo | æ˜¯ | String | ä¼šå‘˜å¡å· |
  | phoneNo | æ˜¯ | String | æ‰‹æœºå· |
  | blocCode | æ˜¯ | String | é›†å›¢ code |
  | memberLevel | æ˜¯ | String | ä¼šå‘˜ç­‰çº§ |
  | name | å¦ | String | å§“å |

- JSON ç¤ºä¾‹

```json
{
  "blocCode": "82671",
  "memberNo": "530945277",
  "memberLevel": "6",
  "phoneNo": "11111111111"
}
```

- è¿”å›æ•°æ®è¯´æ˜

  | å‚æ•°åç§° | æ•°æ®ç±»å‹ | æè¿° |
    | --- | --- | --- |
  | code | String | è¿”å›ç  |
  | message | String | è¿”å›æ¶ˆæ¯ |
  | data | String | "success": æˆåŠŸ "fail": å¤±è´¥ |


- JSON ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": "success"
}
```

## ä¸‰ã€åˆ†é”€å•†è°ƒç”¨æ—…æ™ºåˆ†é”€å¹³å° API è°ƒç”¨ç¤ºä¾‹è¯´æ˜

### å‚æ•°è¯´æ˜

- method ä¸ºã€æšä¸¾è¯´æ˜ã€‘é‡Œçš„ method å€¼
- url ä¸ºã€æšä¸¾è¯´æ˜ã€‘é‡Œçš„ url å€¼

### 3.1ï¼šJAVA è¯­è¨€è°ƒç”¨ç¤ºä¾‹

å®¢æˆ·è°ƒç”¨é‡‡ç”¨ HTTP æ–¹å¼æ¥è°ƒç”¨ï¼ˆJAVAï¼‰ï¼š

```java
// è°ƒç”¨é€šçš„é€šç”¨ URL
String url = "https://open.zktapi.com/drp";
```

#### æˆæƒè¯·æ±‚ç¤ºä¾‹

POST https://open.zktapi.com/drp/authorize/getToken

- è¯·æ±‚ä½“å‚æ•°

```json
{
  "trackingId": "9481faa5-1833-4074-96cd-256584a56c55",
  "version": "V1.0.0",
  "timestamp": 1628213264208,
  "signature": "z1xpl+HeRocZtWjpyKfB5aoAoPvDx+znc/o6EXd0cqs=",
  "clientId": "123456",
  "clientSecret": "ff9sfd89ad8fsd9dd"
}
```

- è¿”å›ç¤ºä¾‹

```json
{
  "code": "200",
  "message": "æˆåŠŸ",
  "data": {
    "accessToken": "0f727a75b4cf477282daa9dc761a8377",
    "expiresIn": 1628220514455
  }
}
```

#### ç”Ÿæˆç­¾å

ç­¾åç§˜é’¥æ˜¯åŒ clientId & clientSecret ä¸€èµ·ç»™å‡ºçš„ secretKey

```java
StringBuilder sb = new StringBuilder(secretKey);
// method å‚è€ƒ 4.1 æ–¹æ³•æšä¸¾
sb.

append(trackingId)
.

append(method)
.

append(timestamp)
.

append(version);

String sign = SignUtil.sign(secretKey, url, "post", sb.toString().getBytes());
```

## ğŸ”§ SignUtil å·¥å…·ç±»

```java
import com.ly.titc.common.constants.Constant;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Base64;
import org.apache.commons.io.IOUtils;
import org.apache.commons.lang3.StringUtils;

public class SignUtil {
    /**
     * è®¡ç®—HTTP è¯·æ±‚ç­¾å
     * @param secret ç­¾åç§˜é’¥
     * @param uri åŸå§‹HTTP è¯·æ±‚PATH(ä¸åŒ…å«Query)
     * @param httpMethod åŸå§‹HTTP è¯·æ±‚æ–¹æ³•
     * @param inputStreamBytes åŸå§‹HTTP è¯·æ±‚ä¸­çš„(secretKey ,trackingId,method,timestamp,version ç”Ÿæˆçš„äºŒè¿›åˆ¶æµ)(ä»…å½“è¯·æ±‚ä¸ºPOST/PUT ä¸”éè¡¨å•è¯·æ±‚æ‰éœ€è¦è®¾ç½®æ­¤å±æ€§,è¡¨å•å½¢å¼çš„éœ€è¦å°†å‚æ•°æ”¾åˆ°paramsMap ä¸­)
     * @return ç­¾åç»“æœ
     * @throws Exception
     */
    public static String sign(String secret, String uri, String httpMethod, byte[] inputStreamBytes) throws Exception {
        String bodyMd5 = buildBodyMd5(httpMethod, inputStreamBytes);
        String stringToSign = buildStringToSign(uri, httpMethod, bodyMd5);
        Mac hmacSha256 = Mac.getInstance("HmacSHA256");
        byte[] keyBytes = secret.getBytes("UTF-8");
        hmacSha256.init(new SecretKeySpec(keyBytes, 0, keyBytes.length, "HmacSHA256"));
        return new String(Base64.encodeBase64(hmacSha256.doFinal(stringToSign.getBytes("UTF-8"))), "UTF-8");
    }

    /**
     * æ„å»ºBodyMd5
     * @param httpMethod HTTP è¯·æ±‚æ–¹æ³•
     * @param inputStreamBytes HTTP è¯·æ±‚Body ä½“å­—èŠ‚æ•°ç»„
     * @return Body Md5 å€¼
     * @throws IOException
     */
    private static String buildBodyMd5(String httpMethod, byte[] inputStreamBytes) throws IOException {
        if (inputStreamBytes == null) {
            return null;
        }
        if (!httpMethod.equalsIgnoreCase("post") && !httpMethod.equalsIgnoreCase("put")) {
            return null;
        }
        InputStream inputStream = new ByteArrayInputStream(inputStreamBytes);
        byte[] bodyBytes = IOUtils.toByteArray(inputStream);
        if (bodyBytes != null && bodyBytes.length > 0) {
            return base64AndMD5(bodyBytes).trim();
        }
        return null;
    }

    /**
     * ç»„ç»‡å¾…è®¡ç®—ç­¾åå­—ç¬¦ä¸²
     * @param url Url
     * @param method HTTP æ–¹æ³•
     * @param bodyMd5 Body Md5 å€¼
     * @return å¾…è®¡ç®—ç­¾åå­—ç¬¦ä¸²
     */
    private static String buildStringToSign(String url, String method, String bodyMd5) {
        StringBuilder sb = new StringBuilder();
        sb.append(url).append("\n").append(method).append("\n");
        if (StringUtils.isNoneBlank(bodyMd5)) {
            sb.append(bodyMd5);
        }
        return sb.toString();
    }

    /**
     * å…ˆè¿›è¡ŒMD5 æ‘˜è¦å†è¿›è¡ŒBase64 ç¼–ç è·å–æ‘˜è¦å­—ç¬¦ä¸²
     * @param bytes å¾…è®¡ç®—å­—èŠ‚æ•°ç»„
     * @return
     */
    public static String base64AndMD5(byte[] bytes) {
        if (bytes == null) {
            throw new IllegalArgumentException("bytes can not be null");
        }
        try {
            final MessageDigest md = MessageDigest.getInstance("MD5");
            md.reset();
            md.update(bytes);
            final Base64 base64 = new Base64();
            return new String(base64.encode(md.digest()));
        } catch (final NoSuchAlgorithmException e) {
            throw new IllegalArgumentException("unknown algorithm MD5");
        }
    }
}
```

### 3.2ï¼šå…¶ä»–è¯­è¨€åŠ å¯†è¯´æ˜

1. æ‰€æœ‰çš„äºŒè¿›åˆ¶æµéƒ½æ˜¯ UTF-8 ç¼–ç ã€‚
2. ç¬¬ä¸€æ­¥ï¼šå°†å‚æ•° secretKeyã€trackingIdã€methodã€timestampã€version å…± 5
   ä¸ªå…ƒç´ æ‹¼æ¥æˆå­—ç¬¦ä¸²çš„äºŒè¿›åˆ¶æµ inputStreamBytesã€‚
3. ç¬¬äºŒæ­¥ï¼šå°† inputStreamBytes è¿›è¡Œ md5 åŠ å¯†åï¼Œå†è¿›è¡Œ base64 ç¼–ç ç”Ÿæˆ bodyMd5ã€‚
4. ç¬¬ä¸‰æ­¥ï¼šå°† urlã€æ¢è¡Œç¬¦ã€postã€æ¢è¡Œç¬¦ã€bodyMd5 å…± 5 ä¸ªå…ƒç´ æ‹¼æˆå­—ç¬¦ä¸²ï¼Œç»“åˆåŠ å¯†å¯†é’¥
   secretKey å¯¹å…¶è¿›è¡Œ HmacSHA256 åŠ å¯†ï¼Œæœ€ç»ˆç”Ÿæˆç­¾åã€‚

## å››ã€æ—…æ™ºåˆ†é”€å¹³å°è°ƒç”¨åˆ†é”€å•†æ¥å£è¯´æ˜

1. åˆ†é”€å•†çº¿ä¸‹æä¾›ç”¨æˆ·åå’Œå¯†ç ç»™æ—…æ™ºåˆ†é”€å¹³å°ã€‚
2. æ—…æ™ºåˆ†é”€å¹³å°æƒé™è®¤è¯ä¿¡æ¯æ”¾åœ¨ http header ä¸­ã€‚
3. è¯·æ±‚ä¸šåŠ¡æ•°æ®å‚æ•°è¯´æ˜
   | å‚æ•°åç§° | æ˜¯å¦å¿…å¡« | æ•°æ®ç±»å‹ | æè¿° |
   | --- | --- | --- | --- |
   | memberNo | æ˜¯ | String | ä¼šå‘˜å¡å· |
   | phoneNo | æ˜¯ | String | æ‰‹æœºå· |
   | blocCode | æ˜¯ | String | é›†å›¢ code |
   | memberLevel | æ˜¯ | String | ä¼šå‘˜ç­‰çº§ |
   | name | å¦ | String | å§“å |

## äº”ã€æšä¸¾è¯´æ˜

### 5.1 æ–¹æ³•æšä¸¾

| url                               | method                           | desc     |
|-----------------------------------|----------------------------------|----------|
| /authorize/getToken               | authorize.getToken               | æˆæƒ       |
| /region/listRegionTrees           | region.listRegionTrees           | æŸ¥è¯¢ä¸‰çº§åŸå¸‚ä¿¡æ¯ |
| /hotel/list                       | hotel.list                       | é…’åº—åŸºç¡€æ•°æ®åˆ—è¡¨ |
| /hotel/getByVid                   | hotel.getByVid                   | é…’åº—è¯¦æƒ…     |
| /roomType/listByHotelVid          | roomType.listByHotelVid          | é…’åº—æˆ¿å‹åˆ—è¡¨   |
| /roomType/getById                 | roomType.getById                 | é…’åº—æˆ¿å‹è¯¦æƒ…   |
| /product/list                     | product.list                     | é…’åº—äº§å“åˆ—è¡¨   |
| /product/getById                  | product.getById                  | é…’åº—äº§å“è¯¦æƒ…   |
| /roomType/listDailyDetails        | roomType.listDailyDetails        | é…’åº—æˆ¿å‹æ¯æ—¥æ˜ç»† |
| /product/listDailyDetails         | product.listDailyDetails         | æˆ¿å‹äº§å“æ¯æ—¥æ˜ç»† |
| /product/hotelListDailyDetails    | product.hotelListDailyDetails    | é…’åº—äº§å“æ¯æ—¥æ˜ç»† |
| /order/create                     | order.create                     | åˆ›å»ºè®¢å•     |
| /order/cancel                     | order.cancel                     | å–æ¶ˆè®¢å•     |
| /order/reserveValidateByProductId | order.reserveValidateByProductId | äº§å“å¯å®šæ£€æŸ¥   |
| /order/getByOrderId               | order.getByOrderId               | è®¢å•æŸ¥è¯¢     |
| /order/list                       | order.list                       | è®¢å•åˆ—è¡¨     |
| /member/bind                      | member.bind                      | ä¼šå‘˜ç»‘å®š     |
| /member/search                    | member.search                    | ä¼šå‘˜ä¿¡æ¯æŸ¥è¯¢   |
| å¯¹æ¥æ–¹æä¾›çš„å®Œæ•´é€šçŸ¥åœ°å€                      | member.notify                    | ä¼šå‘˜ä¿¡æ¯å˜æ›´é€šçŸ¥ |

### 5.2 é…’åº—ä¿¡æ¯å˜æ›´é€šçŸ¥ç±»å‹

| å˜åŒ–ç±»å‹             | è¯´æ˜                                     |
|------------------|----------------------------------------|
| AvailRooms       | æˆ¿æ€æˆ¿é‡å˜åŒ–                                 |
| ProductRoomState | äº§å“æˆ¿æ€çš„æ¯æ—¥å¼€å…³å˜åŒ–                            |
| Rate             | æˆ¿ä»·å˜åŒ–                                   |
| HotelOffline     | é…’åº—ä¸‹çº¿                                   |
| HotelOnline      | é…’åº—ä¸Šçº¿                                   |
| RoomType         | æˆ¿å‹é™æ€ä¿¡æ¯å˜åŒ–                               |
| Product          | äº§å“é™æ€ä¿¡æ¯å˜åŒ– ( åŒ…å«äº§å“é™æ€ä¿¡æ¯ã€å–æ¶ˆè§„åˆ™ã€é¢„è®¢è§„åˆ™ã€ä»·æ ¼æ–¹æ¡ˆå˜åŒ– ) |
| Hotel            | é…’åº—é™æ€ä¿¡æ¯å˜åŒ–                               |
